{
    "sourceFile": "resources/views/frontend/market_complaint/market_complaint_view.blade.php",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 12,
            "patches": [
                {
                    "date": 1718260980638,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1718260991284,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -252,9 +252,11 @@\n                         @elseif($data->stage == 6 && (in_array(4, $userRoleIds) || in_array(18, $userRoleIds)))\r\n                             <button class=\"button_theme1\" data-bs-toggle=\"modal\" data-bs-target=\"#signature-modal\">\r\n                                 All CAPA Closed\r\n                             </button>\r\n-                            \r\n+                            <button class=\"button_theme1\" data-bs-toggle=\"modal\" data-bs-target=\"#child-modal\">\r\n+                                Child\r\n+                            </button>\r\n                             <button class=\"button_theme1\" data-bs-toggle=\"modal\" data-bs-target=\"#\">\r\n                                 Regulatory Reporting child\r\n                             </button>\r\n \r\n"
                },
                {
                    "date": 1718261002480,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -252,14 +252,14 @@\n                         @elseif($data->stage == 6 && (in_array(4, $userRoleIds) || in_array(18, $userRoleIds)))\r\n                             <button class=\"button_theme1\" data-bs-toggle=\"modal\" data-bs-target=\"#signature-modal\">\r\n                                 All CAPA Closed\r\n                             </button>\r\n-                            <button class=\"button_theme1\" data-bs-toggle=\"modal\" data-bs-target=\"#child-modal\">\r\n+                            <button class=\"button_theme1\" data-bs-toggle=\"modal\" data-bs-target=\"#child-modalre\">\r\n                                 Child\r\n                             </button>\r\n-                            <button class=\"button_theme1\" data-bs-toggle=\"modal\" data-bs-target=\"#\">\r\n+                            {{-- <button class=\"button_theme1\" data-bs-toggle=\"modal\" data-bs-target=\"#\">\r\n                                 Regulatory Reporting child\r\n-                            </button>\r\n+                            </button> --}}\r\n \r\n \r\n \r\n                         @elseif($data->stage == 7 && (in_array(4, $userRoleIds) || in_array(18, $userRoleIds)))\r\n"
                },
                {
                    "date": 1718261025385,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -252,9 +252,9 @@\n                         @elseif($data->stage == 6 && (in_array(4, $userRoleIds) || in_array(18, $userRoleIds)))\r\n                             <button class=\"button_theme1\" data-bs-toggle=\"modal\" data-bs-target=\"#signature-modal\">\r\n                                 All CAPA Closed\r\n                             </button>\r\n-                            <button class=\"button_theme1\" data-bs-toggle=\"modal\" data-bs-target=\"#child-modalre\">\r\n+                            <button class=\"button_theme1\" data-bs-toggle=\"modal\" data-bs-target=\"#child-modalregul\">\r\n                                 Child\r\n                             </button>\r\n                             {{-- <button class=\"button_theme1\" data-bs-toggle=\"modal\" data-bs-target=\"#\">\r\n                                 Regulatory Reporting child\r\n@@ -431,8 +431,9 @@\n                             </form>\r\n                         </div>\r\n                     </div>\r\n                 </div>\r\n+                ================================================regulatry\r\n         {{-- ==================================capa and  Action child=============================================== --}}\r\n \r\n \r\n                 <div class=\"modal fade\" id=\"child-modal\">\r\n"
                },
                {
                    "date": 1718261032114,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -431,9 +431,9 @@\n                             </form>\r\n                         </div>\r\n                     </div>\r\n                 </div>\r\n-                ================================================regulatry\r\n+                {{-- ================================================regulatry child model==================== --}}\r\n         {{-- ==================================capa and  Action child=============================================== --}}\r\n \r\n \r\n                 <div class=\"modal fade\" id=\"child-modal\">\r\n"
                },
                {
                    "date": 1718261060096,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -385,8 +385,55 @@\n \r\n \r\n \r\n \r\n+                <div class=\"modal fade\" id=\"cancel-modalregul\">\r\n+                    <div class=\"modal-dialog modal-dialog-centered\">\r\n+                        <div class=\"modal-content\">\r\n+\r\n+                            <!-- Modal Header -->\r\n+                            <div class=\"modal-header\">\r\n+                                <h4 class=\"modal-title\">E-Signature</h4>\r\n+                                <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>\r\n+                            </div>\r\n+\r\n+                            <form action=\"{{ route('marketcomplaint.MarketComplaintCancel', $data->id) }}\" method=\"POST\">\r\n+                                @csrf\r\n+                                <!-- Modal body -->\r\n+                                <div class=\"modal-body\">\r\n+                                    <div class=\"mb-3 text-justify\">\r\n+                                        Please select a meaning and a outcome for this task and enter your username\r\n+                                        and password for this task. You are performing an electronic signature,\r\n+                                        which is legally binding equivalent of a hand written signature.\r\n+                                    </div>\r\n+                                    <div class=\"group-input\">\r\n+                                        <label for=\"username\">Username <span class=\"text-danger\">*</span></label>\r\n+                                        <input type=\"text\" name=\"username\" required>\r\n+                                    </div>\r\n+                                    <div class=\"group-input\">\r\n+                                        <label for=\"password\">Password <span class=\"text-danger\">*</span></label>\r\n+                                        <input type=\"password\" name=\"password\" required>\r\n+                                    </div>\r\n+                                    <div class=\"group-input\">\r\n+                                        <label for=\"comment\">Comment <span class=\"text-danger\">*</span></label>\r\n+                                        <input type=\"comment\" name=\"comment\" required>\r\n+                                    </div>\r\n+                                </div>\r\n+\r\n+                                <!-- Modal footer -->\r\n+                                <!-- <div class=\"modal-footer\">\r\n+                                        <button type=\"submit\" data-bs-dismiss=\"modal\">Submit</button>\r\n+                                        <button>Close</button>\r\n+                                    </div> -->\r\n+                                <div class=\"modal-footer\">\r\n+                                    <button type=\"submit\">Submit</button>\r\n+                                    <button type=\"button\" data-bs-dismiss=\"modal\">Close</button>\r\n+                                </div>\r\n+                            </form>\r\n+                        </div>\r\n+                    </div>\r\n+                </div>\r\n+                {{-- ================================================regulatry child model==================== --}}\r\n                 <div class=\"modal fade\" id=\"cancel-modal\">\r\n                     <div class=\"modal-dialog modal-dialog-centered\">\r\n                         <div class=\"modal-content\">\r\n \r\n@@ -431,9 +478,8 @@\n                             </form>\r\n                         </div>\r\n                     </div>\r\n                 </div>\r\n-                {{-- ================================================regulatry child model==================== --}}\r\n         {{-- ==================================capa and  Action child=============================================== --}}\r\n \r\n \r\n                 <div class=\"modal fade\" id=\"child-modal\">\r\n"
                },
                {
                    "date": 1718261077638,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -385,9 +385,9 @@\n \r\n \r\n \r\n \r\n-                <div class=\"modal fade\" id=\"cancel-modalregul\">\r\n+                <div class=\"modal fade\" id=\"child-modalregul\">\r\n                     <div class=\"modal-dialog modal-dialog-centered\">\r\n                         <div class=\"modal-content\">\r\n \r\n                             <!-- Modal Header -->\r\n"
                },
                {
                    "date": 1718261089575,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -385,54 +385,9 @@\n \r\n \r\n \r\n \r\n-                <div class=\"modal fade\" id=\"child-modalregul\">\r\n-                    <div class=\"modal-dialog modal-dialog-centered\">\r\n-                        <div class=\"modal-content\">\r\n-\r\n-                            <!-- Modal Header -->\r\n-                            <div class=\"modal-header\">\r\n-                                <h4 class=\"modal-title\">E-Signature</h4>\r\n-                                <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>\r\n-                            </div>\r\n-\r\n-                            <form action=\"{{ route('marketcomplaint.MarketComplaintCancel', $data->id) }}\" method=\"POST\">\r\n-                                @csrf\r\n-                                <!-- Modal body -->\r\n-                                <div class=\"modal-body\">\r\n-                                    <div class=\"mb-3 text-justify\">\r\n-                                        Please select a meaning and a outcome for this task and enter your username\r\n-                                        and password for this task. You are performing an electronic signature,\r\n-                                        which is legally binding equivalent of a hand written signature.\r\n-                                    </div>\r\n-                                    <div class=\"group-input\">\r\n-                                        <label for=\"username\">Username <span class=\"text-danger\">*</span></label>\r\n-                                        <input type=\"text\" name=\"username\" required>\r\n-                                    </div>\r\n-                                    <div class=\"group-input\">\r\n-                                        <label for=\"password\">Password <span class=\"text-danger\">*</span></label>\r\n-                                        <input type=\"password\" name=\"password\" required>\r\n-                                    </div>\r\n-                                    <div class=\"group-input\">\r\n-                                        <label for=\"comment\">Comment <span class=\"text-danger\">*</span></label>\r\n-                                        <input type=\"comment\" name=\"comment\" required>\r\n-                                    </div>\r\n-                                </div>\r\n-\r\n-                                <!-- Modal footer -->\r\n-                                <!-- <div class=\"modal-footer\">\r\n-                                        <button type=\"submit\" data-bs-dismiss=\"modal\">Submit</button>\r\n-                                        <button>Close</button>\r\n-                                    </div> -->\r\n-                                <div class=\"modal-footer\">\r\n-                                    <button type=\"submit\">Submit</button>\r\n-                                    <button type=\"button\" data-bs-dismiss=\"modal\">Close</button>\r\n-                                </div>\r\n-                            </form>\r\n-                        </div>\r\n-                    </div>\r\n-                </div>\r\n+             \r\n                 {{-- ================================================regulatry child model==================== --}}\r\n                 <div class=\"modal fade\" id=\"cancel-modal\">\r\n                     <div class=\"modal-dialog modal-dialog-centered\">\r\n                         <div class=\"modal-content\">\r\n"
                },
                {
                    "date": 1718261107726,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -387,8 +387,60 @@\n \r\n \r\n              \r\n                 {{-- ================================================regulatry child model==================== --}}\r\n+\r\n+\r\n+                <div class=\"modal fade\" id=\"child-modal\">\r\n+                    <div class=\"modal-dialog modal-dialog-centered\">\r\n+                        <div class=\"modal-content\">\r\n+            \r\n+                            <!-- Modal Header -->\r\n+                            <div class=\"modal-header\">\r\n+                                <h4 class=\"modal-title\">Child</h4>\r\n+                            </div>\r\n+                            <div class=\"model-body\">\r\n+\r\n+                                <form action=\"{{ route('marketcomplaint.capa_action_child', $data->id) }}\" method=\"POST\">\r\n+                                    @csrf\r\n+                                    <!-- Modal body -->\r\n+                                    <div class=\"modal-body\">\r\n+                                        <div class=\"group-input\">\r\n+                                            <label style=\"  display: flex;     gap: 18px; width: 60px;\" for=\"capa-child\">\r\n+                                                <input type=\"radio\" name=\"revision\" id=\"capa-child\" value=\"capa-child\">\r\n+                                                CAPA\r\n+                                            </label>\r\n+                                        </div>\r\n+                                        <div class=\"group-input\">\r\n+                                            <label  style=\" display: flex;     gap: 16px; width: 60px;\" for=\"root-item\">\r\n+                                                <input type=\"radio\" name=\"revision\" id=\"root-item\" value=\"Action-Item\">\r\n+                                                Action Item\r\n+                                            </label>\r\n+                                        </div>\r\n+                                        {{-- <div class=\"group-input\">\r\n+                                            <label for=\"root-item\">\r\n+                                             <input type=\"radio\" name=\"revision\" id=\"root-item\" value=\"effectiveness-check\">\r\n+                                                Effectiveness check\r\n+                                            </label>\r\n+                                        </div> --}}\r\n+                                    </div>\r\n+                \r\n+                                    <!-- Modal footer -->\r\n+                                    <!-- <div class=\"modal-footer\">\r\n+                                        <button type=\"button\" data-bs-dismiss=\"modal\">Close</button>\r\n+                                        <button type=\"submit\">Continue</button>\r\n+                                    </div> -->\r\n+                                    <div class=\"modal-footer\">\r\n+                                              <button type=\"submit\">Submit</button>\r\n+                                             <button type=\"button\" data-bs-dismiss=\"modal\">Close</button>                         \r\n+                                   </div>\r\n+                                </form>\r\n+                            </div>\r\n+            \r\n+                        </div>\r\n+                    </div>\r\n+                </div>\r\n+\r\n                 <div class=\"modal fade\" id=\"cancel-modal\">\r\n                     <div class=\"modal-dialog modal-dialog-centered\">\r\n                         <div class=\"modal-content\">\r\n \r\n"
                },
                {
                    "date": 1718261115939,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -389,9 +389,9 @@\n              \r\n                 {{-- ================================================regulatry child model==================== --}}\r\n \r\n \r\n-                <div class=\"modal fade\" id=\"child-modal\">\r\n+                <div class=\"modal fade\" id=\"child-modalregul\">\r\n                     <div class=\"modal-dialog modal-dialog-centered\">\r\n                         <div class=\"modal-content\">\r\n             \r\n                             <!-- Modal Header -->\r\n"
                },
                {
                    "date": 1718261141686,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -406,17 +406,12 @@\n                                     <div class=\"modal-body\">\r\n                                         <div class=\"group-input\">\r\n                                             <label style=\"  display: flex;     gap: 18px; width: 60px;\" for=\"capa-child\">\r\n                                                 <input type=\"radio\" name=\"revision\" id=\"capa-child\" value=\"capa-child\">\r\n-                                                CAPA\r\n+                                                Regulatory Reporting child\r\n                                             </label>\r\n                                         </div>\r\n-                                        <div class=\"group-input\">\r\n-                                            <label  style=\" display: flex;     gap: 16px; width: 60px;\" for=\"root-item\">\r\n-                                                <input type=\"radio\" name=\"revision\" id=\"root-item\" value=\"Action-Item\">\r\n-                                                Action Item\r\n-                                            </label>\r\n-                                        </div>\r\n+                                        \r\n                                         {{-- <div class=\"group-input\">\r\n                                             <label for=\"root-item\">\r\n                                              <input type=\"radio\" name=\"revision\" id=\"root-item\" value=\"effectiveness-check\">\r\n                                                 Effectiveness check\r\n"
                },
                {
                    "date": 1718261149800,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -399,9 +399,9 @@\n                                 <h4 class=\"modal-title\">Child</h4>\r\n                             </div>\r\n                             <div class=\"model-body\">\r\n \r\n-                                <form action=\"{{ route('marketcomplaint.capa_action_child', $data->id) }}\" method=\"POST\">\r\n+                                <form action=\"# method=\"POST\">\r\n                                     @csrf\r\n                                     <!-- Modal body -->\r\n                                     <div class=\"modal-body\">\r\n                                         <div class=\"group-input\">\r\n"
                },
                {
                    "date": 1718261227199,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -399,9 +399,9 @@\n                                 <h4 class=\"modal-title\">Child</h4>\r\n                             </div>\r\n                             <div class=\"model-body\">\r\n \r\n-                                <form action=\"# method=\"POST\">\r\n+                                <form action=\"\" method=\"POST\">\r\n                                     @csrf\r\n                                     <!-- Modal body -->\r\n                                     <div class=\"modal-body\">\r\n                                         <div class=\"group-input\">\r\n"
                }
            ],
            "date": 1718260980638,
            "name": "Commit-0",
            "content": "@extends('frontend.layout.main')\r\n@section('container')\r\n    <style>\r\n        textarea.note-codable {\r\n            display: none !important;\r\n        }\r\n\r\n        header {\r\n            display: none;\r\n        }\r\n    </style>\r\n    @php\r\n        $users = DB::table('users')->get();\r\n    @endphp\r\n    <div class=\"form-field-head\">\r\n        {{-- <div class=\"pr-id\">\r\n            New Child\r\n        </div> --}}\r\n        <div class=\"division-bar\">\r\n            <strong>Site Division/Project</strong> :\r\n            {{ Helpers::getDivisionName(session()->get('division')) }}/ Market Complaint\r\n        </div>\r\n    </div>\r\n\r\n    <script>\r\n        $(document).ready(function() {\r\n            $('#Monitor_Information').click(function(e) {\r\n                function generateTableRow(serialNumber) {\r\n\r\n\r\n                    var html =\r\n                        '<tr>' +\r\n                        '<td><input disabled type=\"text\" name=\"serial[]\" value=\"' + serialNumber +\r\n                        '\"></td>' +\r\n                        '<td><input type=\"date\" name=\"date[]\"></td>' +\r\n                        ' <td><input type=\"text\" name=\"Responsible[]\"></td>' +\r\n                        '<td><input type=\"text\" name=\"ItemDescription[]\"></td>' +\r\n                        '<td><input type=\"date\" name=\"SentDate[]\"></td>' +\r\n                        '<td><input type=\"date\" name=\"ReturnDate[]\"></td>' +\r\n                        '<td><input type=\"text\" name=\"Comment[]\"></td>' +\r\n\r\n\r\n                        '</tr>';\r\n\r\n                    // for (var i = 0; i < users.length; i++) {\r\n                    //     html += '<option value=\"' + users[i].id + '\">' + users[i].name + '</option>';\r\n                    // }\r\n\r\n                    // html += '</select></td>' +\r\n\r\n                    //     '</tr>';\r\n\r\n                    return html;\r\n                }\r\n\r\n                var tableBody = $('#Monitor_Information_details tbody');\r\n                var rowCount = tableBody.children('tr').length;\r\n                var newRow = generateTableRow(rowCount + 1);\r\n                tableBody.append(newRow);\r\n            });\r\n        });\r\n    </script>\r\n\r\n    <script>\r\n        $(document).ready(function() {\r\n            $('#Product_Material').click(function(e) {\r\n                function generateTableRow(serialNumber) {\r\n\r\n\r\n                    var html =\r\n                        '<tr>' +\r\n                        '<td><input disabled type=\"text\" name=\"serial[]\" value=\"' + serialNumber +\r\n                        '\"></td>' +\r\n                        '<td><input type=\"text\" name=\"ProductName[]\"></td>' +\r\n                        '<td><input type=\"number\" name=\"ReBatchNumber[]\"></td>' +\r\n                        '<td><input type=\"date\" name=\"ExpiryDate[]\"></td>' +\r\n                        '<td><input type=\"date\" name=\"ManufacturedDate[]\"></td>' +\r\n                        '<td><input type=\"text\" name=\"Disposition[]\"></td>' +\r\n                        '<td><input type=\"text\" name=\"Comment[]\"></td>' +\r\n\r\n\r\n                        '</tr>';\r\n\r\n                    // for (var i = 0; i < users.length; i++) {\r\n                    //     html += '<option value=\"' + users[i].id + '\">' + users[i].name + '</option>';\r\n                    // }\r\n\r\n                    // html += '</select></td>' +\r\n\r\n                    //     '</tr>';\r\n\r\n                    return html;\r\n                }\r\n\r\n                var tableBody = $('#Product_Material_details tbody');\r\n                var rowCount = tableBody.children('tr').length;\r\n                var newRow = generateTableRow(rowCount + 1);\r\n                tableBody.append(newRow);\r\n            });\r\n        });\r\n    </script>\r\n\r\n\r\n    <script>\r\n        $(document).ready(function() {\r\n            $('#Equipment').click(function(e) {\r\n                function generateTableRow(serialNumber) {\r\n\r\n\r\n                    var html =\r\n                        '<tr>' +\r\n                        '<td><input disabled type=\"text\" name=\"serial[]\" value=\"' + serialNumber +\r\n                        '\"></td>' +\r\n                        '<td><input type=\"text\" name=\"ProductName[]\"></td>' +\r\n                        '<td><input type=\"number\" name=\"BatchNumber[]\"></td>' +\r\n                        '<td><input type=\"date\" name=\"ExpiryDate[]\"></td>' +\r\n                        '<td><input type=\"date\" name=\"ManufacturedDate[]\"></td>' +\r\n                        '<td><input type=\"number\" name=\"NumberOfItemsNeeded[]\"></td>' +\r\n                        '<td><input type=\"text\" name=\"Exist[]\"></td>' +\r\n                        '<td><input type=\"text\" name=\"Comment[]\"></td>' +\r\n\r\n\r\n                        '</tr>';\r\n\r\n                    // for (var i = 0; i < users.length; i++) {\r\n                    //     html += '<option value=\"' + users[i].id + '\">' + users[i].name + '</option>';\r\n                    // }\r\n\r\n                    // html += '</select></td>' +\r\n\r\n                    //     '</tr>';\r\n\r\n                    return html;\r\n                }\r\n\r\n                var tableBody = $('#Equipment_details tbody');\r\n                var rowCount = tableBody.children('tr').length;\r\n                var newRow = generateTableRow(rowCount + 1);\r\n                tableBody.append(newRow);\r\n            });\r\n        });\r\n    </script>\r\n\r\n\r\n\r\n    <style>\r\n        .progress-bars div {\r\n            flex: 1 1 auto;\r\n            border: 1px solid grey;\r\n            padding: 5px;\r\n            text-align: center;\r\n            position: relative;\r\n            /* border-right: none; */\r\n            background: white;\r\n        }\r\n\r\n        .state-block {\r\n            padding: 20px;\r\n            margin-bottom: 20px;\r\n        }\r\n\r\n        .progress-bars div.active {\r\n            background: green;\r\n            font-weight: bold;\r\n        }\r\n\r\n        #change-control-fields>div>div.inner-block.state-block>div.status>div.progress-bars.d-flex>div:nth-child(1) {\r\n            border-radius: 20px 0px 0px 20px;\r\n        }\r\n\r\n        #change-control-fields>div>div.inner-block.state-block>div.status>div.progress-bars.d-flex>div:nth-child(9) {\r\n            border-radius: 0px 20px 20px 0px;\r\n\r\n        }\r\n    </style>\r\n    {{-- ! ========================================= --}}\r\n    {{-- !               DATA FIELDS                 --}}\r\n    {{-- ! ========================================= --}}\r\n    <div id=\"change-control-fields\">\r\n        <div class=\"container-fluid\">\r\n\r\n\r\n            <div class=\"inner-block state-block\">\r\n                <div class=\"d-flex justify-content-between align-items-center\">\r\n                    <div class=\"main-head\">Record Workflow </div>\r\n\r\n                    <div class=\"d-flex\" style=\"gap:20px;\">\r\n                        {{-- <button class=\"button_theme1\" onclick=\"window.print();return false;\"\r\n                            class=\"new-doc-btn\">Print</button> --}}\r\n\r\n\r\n\r\n                        @php\r\n                            $userRoles = DB::table('user_roles')\r\n                                ->where(['user_id' => Auth::user()->id, 'q_m_s_divisions_id' => $data->division_id])\r\n                                ->get();\r\n                            // dd($userRoles);\r\n\r\n                            $userRoleIds = $userRoles->pluck('q_m_s_roles_id')->toArray();\r\n                        @endphp\r\n                        <button class=\"button_theme1\"> <a class=\"text-white\"\r\n                                href=\"{{ route('marketcomplaint.MarketComplaintAuditReport', $data->id) }}\"> Audit Trail\r\n                            </a> </button>\r\n                        @if ($data->stage == 1 && (in_array(3, $userRoleIds) || in_array(18, $userRoleIds)))\r\n                            <button class=\"button_theme1\" data-bs-toggle=\"modal\" data-bs-target=\"#signature-modal\">\r\n                                Submit\r\n                            </button>\r\n\r\n\r\n                        @elseif($data->stage == 2 && (in_array(3, $userRoleIds) || in_array(18, $userRoleIds)))\r\n                            <button class=\"button_theme1\" data-bs-toggle=\"modal\" data-bs-target=\"#rejection-modal\">\r\n                                More Information Required\r\n                            </button>\r\n                            <button class=\"button_theme1\" data-bs-toggle=\"modal\" data-bs-target=\"#signature-modal\">\r\n                                Complete Review\r\n                            </button>\r\n                            <button class=\"button_theme1\" data-bs-toggle=\"modal\" data-bs-target=\"#cancel-modal\">\r\n                                Cancel\r\n                            </button>\r\n\r\n\r\n                        @elseif($data->stage == 3 && (in_array(4, $userRoleIds) || in_array(18, $userRoleIds)))\r\n                            <button class=\"button_theme1\" data-bs-toggle=\"modal\" data-bs-target=\"#rejection-modal\">\r\n                                More Information Required\r\n                            </button>\r\n                            <button class=\"button_theme1\" data-bs-toggle=\"modal\" data-bs-target=\"#signature-modal\">\r\n                                Investigation Completed\r\n                            </button>\r\n                            <button class=\"button_theme1\" data-bs-toggle=\"modal\" data-bs-target=\"#child-modal1\">\r\n                                Child\r\n                            </button>\r\n\r\n\r\n                        @elseif($data->stage == 4 && (in_array(4, $userRoleIds) || in_array(18, $userRoleIds)))\r\n                            <button class=\"button_theme1\" data-bs-toggle=\"modal\" data-bs-target=\"#signature-modal\">\r\n                                Propose Plan\r\n                            </button>\r\n                        <button class=\"button_theme1\" data-bs-toggle=\"modal\" data-bs-target=\"#child-modal\">\r\n                                Child\r\n                            </button>\r\n\r\n                           \r\n                        @elseif($data->stage == 5 && (in_array(4, $userRoleIds) || in_array(18, $userRoleIds)))\r\n                            <button class=\"button_theme1\" data-bs-toggle=\"modal\" data-bs-target=\"#signature-modal\">\r\n                                Approve Plan\r\n                            </button>\r\n                            <button class=\"button_theme1\" data-bs-toggle=\"modal\" data-bs-target=\"#rejection-modal\">\r\n                                Reject\r\n                            </button>\r\n\r\n\r\n                        @elseif($data->stage == 6 && (in_array(4, $userRoleIds) || in_array(18, $userRoleIds)))\r\n                            <button class=\"button_theme1\" data-bs-toggle=\"modal\" data-bs-target=\"#signature-modal\">\r\n                                All CAPA Closed\r\n                            </button>\r\n                            \r\n                            <button class=\"button_theme1\" data-bs-toggle=\"modal\" data-bs-target=\"#\">\r\n                                Regulatory Reporting child\r\n                            </button>\r\n\r\n\r\n\r\n                        @elseif($data->stage == 7 && (in_array(4, $userRoleIds) || in_array(18, $userRoleIds)))\r\n                            <button class=\"button_theme1\" data-bs-toggle=\"modal\" data-bs-target=\"#signature-modal\">\r\n                                Send Letter\r\n                            </button>\r\n                            <button class=\"button_theme1\" data-bs-toggle=\"modal\" data-bs-target=\"#child-modal3\">\r\n                                Child\r\n                            </button>\r\n\r\n                         \r\n                        @endif\r\n                        <button class=\"button_theme1\"> <a class=\"text-white\" href=\"{{ url('rcms/qms-dashboard') }}\"> Exit\r\n                            </a> </button>\r\n\r\n\r\n                    </div>\r\n\r\n                </div>\r\n\r\n\r\n                <!--------------------------Modal-------------------->\r\n\r\n\r\n\r\n                <div class=\"modal fade\" id=\"rejection-modal\">\r\n                    <div class=\"modal-dialog modal-dialog-centered\">\r\n                        <div class=\"modal-content\">\r\n\r\n                            <!-- Modal Header -->\r\n                            <div class=\"modal-header\">\r\n                                <h4 class=\"modal-title\">E-Signature</h4>\r\n                                <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>\r\n                            </div>\r\n                            <form action=\"{{ route('marketcomplaint.mar_comp_reject_stateChange', $data->id) }}\"\r\n                                method=\"POST\">\r\n                                @csrf\r\n                                <!-- Modal body -->\r\n                                <div class=\"modal-body\">\r\n                                    <div class=\"mb-3 text-justify\">\r\n                                        Please select a meaning and a outcome for this task and enter your username\r\n                                        and password for this task. You are performing an electronic signature,\r\n                                        which is legally binding equivalent of a hand written signature.\r\n                                    </div>\r\n                                    <div class=\"group-input\">\r\n                                        <label for=\"username\">Username <span class=\"text-danger\">*</span></label>\r\n                                        <input type=\"text\" name=\"username\" required>\r\n                                    </div>\r\n                                    <div class=\"group-input\">\r\n                                        <label for=\"password\">Password <span class=\"text-danger\">*</span></label>\r\n                                        <input type=\"password\" name=\"password\" required>\r\n                                    </div>\r\n                                    <div class=\"group-input\">\r\n                                        <label for=\"comment\">Comment <span class=\"text-danger\">*</span></label>\r\n                                        <input type=\"comment\" name=\"comment\" required>\r\n                                    </div>\r\n                                </div>\r\n\r\n                                <!-- Modal footer -->\r\n                                <!-- <div class=\"modal-footer\">\r\n                                        <button type=\"submit\" data-bs-dismiss=\"modal\">Submit</button>\r\n                                        <button>Close</button>\r\n                                    </div> -->\r\n                                <div class=\"modal-footer\">\r\n                                    <button type=\"submit\">Submit</button>\r\n                                    <button type=\"button\" data-bs-dismiss=\"modal\">Close</button>\r\n\r\n                                </div>\r\n                            </form>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n\r\n\r\n\r\n\r\n                <div class=\"modal fade\" id=\"signature-modal\">\r\n                    <div class=\"modal-dialog modal-dialog-centered\">\r\n                        <div class=\"modal-content\">\r\n\r\n                            <!-- Modal Header -->\r\n                            <div class=\"modal-header\">\r\n                                <h4 class=\"modal-title\">E-Signature</h4>\r\n                                <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>\r\n                            </div>\r\n                            <form action=\"{{ route('marketcomplaint.mar_comp_stagechange', $data->id) }}\" method=\"POST\">\r\n                                @csrf\r\n                                <!-- Modal body -->\r\n                                <div class=\"modal-body\">\r\n                                    <div class=\"mb-3 text-justify\">\r\n                                        Please select a meaning and a outcome for this task and enter your username\r\n                                        and password for this task. You are performing an electronic signature,\r\n                                        which is legally binding equivalent of a hand written signature.\r\n                                    </div>\r\n                                    <div class=\"group-input\">\r\n                                        <label for=\"username\">Username <span class=\"text-danger\">*</span></label>\r\n                                        <input type=\"text\" name=\"username\" required>\r\n                                    </div>\r\n                                    <div class=\"group-input\">\r\n                                        <label for=\"password\">Password <span class=\"text-danger\">*</span></label>\r\n                                        <input type=\"password\" name=\"password\" required>\r\n                                    </div>\r\n                                    <div class=\"group-input\">\r\n                                        <label for=\"comment\">Comment</label>\r\n                                        <input type=\"comment\" name=\"comment\">\r\n                                    </div>\r\n                                </div>\r\n\r\n                                <!-- Modal footer -->\r\n                                <!-- <div class=\"modal-footer\">\r\n                                        <button type=\"submit\" data-bs-dismiss=\"modal\">Submit</button>\r\n                                        <button>Close</button>\r\n                                    </div> -->\r\n                                <div class=\"modal-footer\">\r\n                                    <button type=\"submit\">Submit</button>\r\n                                    <button type=\"button\" data-bs-dismiss=\"modal\">Close</button>\r\n                                </div>\r\n                            </form>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n\r\n\r\n\r\n                <div class=\"modal fade\" id=\"cancel-modal\">\r\n                    <div class=\"modal-dialog modal-dialog-centered\">\r\n                        <div class=\"modal-content\">\r\n\r\n                            <!-- Modal Header -->\r\n                            <div class=\"modal-header\">\r\n                                <h4 class=\"modal-title\">E-Signature</h4>\r\n                                <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>\r\n                            </div>\r\n\r\n                            <form action=\"{{ route('marketcomplaint.MarketComplaintCancel', $data->id) }}\" method=\"POST\">\r\n                                @csrf\r\n                                <!-- Modal body -->\r\n                                <div class=\"modal-body\">\r\n                                    <div class=\"mb-3 text-justify\">\r\n                                        Please select a meaning and a outcome for this task and enter your username\r\n                                        and password for this task. You are performing an electronic signature,\r\n                                        which is legally binding equivalent of a hand written signature.\r\n                                    </div>\r\n                                    <div class=\"group-input\">\r\n                                        <label for=\"username\">Username <span class=\"text-danger\">*</span></label>\r\n                                        <input type=\"text\" name=\"username\" required>\r\n                                    </div>\r\n                                    <div class=\"group-input\">\r\n                                        <label for=\"password\">Password <span class=\"text-danger\">*</span></label>\r\n                                        <input type=\"password\" name=\"password\" required>\r\n                                    </div>\r\n                                    <div class=\"group-input\">\r\n                                        <label for=\"comment\">Comment <span class=\"text-danger\">*</span></label>\r\n                                        <input type=\"comment\" name=\"comment\" required>\r\n                                    </div>\r\n                                </div>\r\n\r\n                                <!-- Modal footer -->\r\n                                <!-- <div class=\"modal-footer\">\r\n                                        <button type=\"submit\" data-bs-dismiss=\"modal\">Submit</button>\r\n                                        <button>Close</button>\r\n                                    </div> -->\r\n                                <div class=\"modal-footer\">\r\n                                    <button type=\"submit\">Submit</button>\r\n                                    <button type=\"button\" data-bs-dismiss=\"modal\">Close</button>\r\n                                </div>\r\n                            </form>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n        {{-- ==================================capa and  Action child=============================================== --}}\r\n\r\n\r\n                <div class=\"modal fade\" id=\"child-modal\">\r\n                    <div class=\"modal-dialog modal-dialog-centered\">\r\n                        <div class=\"modal-content\">\r\n            \r\n                            <!-- Modal Header -->\r\n                            <div class=\"modal-header\">\r\n                                <h4 class=\"modal-title\">Child</h4>\r\n                            </div>\r\n                            <div class=\"model-body\">\r\n\r\n                                <form action=\"{{ route('marketcomplaint.capa_action_child', $data->id) }}\" method=\"POST\">\r\n                                    @csrf\r\n                                    <!-- Modal body -->\r\n                                    <div class=\"modal-body\">\r\n                                        <div class=\"group-input\">\r\n                                            <label style=\"  display: flex;     gap: 18px; width: 60px;\" for=\"capa-child\">\r\n                                                <input type=\"radio\" name=\"revision\" id=\"capa-child\" value=\"capa-child\">\r\n                                                CAPA\r\n                                            </label>\r\n                                        </div>\r\n                                        <div class=\"group-input\">\r\n                                            <label  style=\" display: flex;     gap: 16px; width: 60px;\" for=\"root-item\">\r\n                                                <input type=\"radio\" name=\"revision\" id=\"root-item\" value=\"Action-Item\">\r\n                                                Action Item\r\n                                            </label>\r\n                                        </div>\r\n                                        {{-- <div class=\"group-input\">\r\n                                            <label for=\"root-item\">\r\n                                             <input type=\"radio\" name=\"revision\" id=\"root-item\" value=\"effectiveness-check\">\r\n                                                Effectiveness check\r\n                                            </label>\r\n                                        </div> --}}\r\n                                    </div>\r\n                \r\n                                    <!-- Modal footer -->\r\n                                    <!-- <div class=\"modal-footer\">\r\n                                        <button type=\"button\" data-bs-dismiss=\"modal\">Close</button>\r\n                                        <button type=\"submit\">Continue</button>\r\n                                    </div> -->\r\n                                    <div class=\"modal-footer\">\r\n                                              <button type=\"submit\">Submit</button>\r\n                                             <button type=\"button\" data-bs-dismiss=\"modal\">Close</button>                         \r\n                                   </div>\r\n                                </form>\r\n                            </div>\r\n            \r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n{{-- ==================================RCA and Action child=============================================== --}}\r\n                <div class=\"modal fade\" id=\"child-modal1\">\r\n                    <div class=\"modal-dialog modal-dialog-centered\">\r\n                        <div class=\"modal-content\">\r\n            \r\n                            <!-- Modal Header -->\r\n                            <div class=\"modal-header\">\r\n                                <h4 class=\"modal-title\">Child</h4>\r\n                            </div>\r\n                            <div class=\"model-body\">\r\n                            <form action=\"{{ route('marketcomplaint.rca_action_child', $data->id) }}\" method=\"POST\">\r\n                                @csrf\r\n                                <!-- Modal body -->\r\n                                <div class=\"modal-body\">\r\n                                    <div class=\"group-input\">\r\n                                        <label style=\"  display: flex;     gap: 18px; width: 60px;\" for=\"capa-child\">\r\n                                            <input type=\"radio\" name=\"revision\" id=\"capa-child\" value=\"rca-child\">\r\n                                           RCA\r\n                                        </label>\r\n                                    </div>\r\n                                    <div class=\"group-input\">\r\n                                        <label style=\" display: flex;     gap: 16px; width: 60px;\" for=\"root-item\">\r\n                                            <input type=\"radio\" name=\"revision\" id=\"root-item\" value=\"Action-Item\">\r\n                                          <span style=\"width: 100px;\">  Action Item</span>\r\n                                        </label>\r\n                                    </div>\r\n                                   \r\n                                </div>\r\n            \r\n                               \r\n                                <div class=\"modal-footer\">\r\n                                          <button type=\"submit\">Submit</button>\r\n                                         <button type=\"button\" data-bs-dismiss=\"modal\">Close</button>                         \r\n                               </div>\r\n                            </form>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n{{-- ==================================Regulatory  Reporting  and Effectiveness  Check child=============================================== --}}\r\n\r\n<div class=\"modal fade\" id=\"child-modal3\">\r\n    <div class=\"modal-dialog modal-dialog-centered\">\r\n        <div class=\"modal-content\">\r\n\r\n            <!-- Modal Header -->\r\n            <div class=\"modal-header\">\r\n                <h4 class=\"modal-title\">Child</h4>\r\n            </div>\r\n            <div class=\"model-body\">\r\n\r\n                <form action=\"{{ route('marketcomplaint.Regu_Effec_child', $data->id) }}\" method=\"POST\">\r\n                    @csrf\r\n                    <!-- Modal body -->\r\n                    <div class=\"modal-body\">\r\n                        <div class=\"group-input\">\r\n                            <label style=\" display: flex;     gap: 16px; width: 60px;\" for=\"capa-child\">\r\n                                <input type=\"radio\" name=\"revision\" id=\"rca-child\" value=\"regulatory-child\">\r\n                                Regulatory Reporting\r\n                            </label>\r\n                        </div>\r\n                        <div class=\"group-input\">\r\n                            <label style=\"  display: flex;     gap: 18px; width: 60px;\"for=\"root-item\">\r\n                                <input type=\"radio\" name=\"revision\" id=\"root-item\" value=\"Effectiveness-child\">\r\n                                Effectiveness Check\r\n                            </label>\r\n                        </div>\r\n                       \r\n                    </div>\r\n    \r\n                   \r\n                    <div class=\"modal-footer\">\r\n                              <button type=\"submit\">Submit</button>\r\n                             <button type=\"button\" data-bs-dismiss=\"modal\">Close</button>                         \r\n                   </div>\r\n                </form>\r\n            </div>\r\n\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n\r\n               \r\n                <style>\r\n                    #step-form>div {\r\n                        display: none\r\n                    }\r\n            \r\n                    #step-form>div:nth-child(1) {\r\n                        display: block;\r\n                    }\r\n                    .input_full_width{\r\n                        width: 100%;\r\n                border-radius: 5px;\r\n                margin-bottom: 10px;\r\n                    }\r\n                </style>\r\n            \r\n\r\n\r\n\r\n\r\n               \r\n\r\n\r\n                <script>\r\n                    document.addEventListener('DOMContentLoaded', function() {\r\n                        const removeButtons = document.querySelectorAll('.remove-file');\r\n\r\n                        removeButtons.forEach(button => {\r\n                            button.addEventListener('click', function() {\r\n                                const fileName = this.getAttribute('data-file-name');\r\n                                const fileContainer = this.closest('.file-container');\r\n\r\n                                // Hide the file container\r\n                                if (fileContainer) {\r\n                                    fileContainer.style.display = 'none';\r\n                                }\r\n                            });\r\n                        });\r\n                    });\r\n                </script>\r\n                <script>\r\n                    var maxLength = 255;\r\n                    $('#docname').keyup(function() {\r\n                        var textlen = maxLength - $(this).val().length;\r\n                        $('#rchars').text(textlen);\r\n                    });\r\n                </script>\r\n                <script>\r\n                    var maxLength = 240;\r\n                    $('#duedoc').keyup(function() {\r\n                        var textlen = maxLength - $(this).val().length;\r\n                        $('#rchar').text(textlen);\r\n                    });\r\n                </script>\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n                <!-------------------------- end Modal-------------------->\r\n\r\n\r\n                <div class=\"status\">\r\n                    <div class=\"head\">Current Status</div>\r\n                    @if ($data->stage == 0)\r\n                        <div class=\"progress-bars \">\r\n                            <div class=\"bg-danger\">Closed-Cancelled</div>\r\n                        </div>\r\n                    @else\r\n                        <div class=\"progress-bars d-flex\" style=\"font-size: 15px;\">\r\n                            @if ($data->stage >= 1)\r\n                                <div class=\"active\">Opened</div>\r\n                            @else\r\n                                <div class=\"\">Opened</div>\r\n                            @endif\r\n\r\n                            @if ($data->stage >= 2)\r\n                                <div class=\"active\">Supervisor Review </div>\r\n                            @else\r\n                                <div class=\"\">Supervisor Review</div>\r\n                            @endif\r\n\r\n                            @if ($data->stage >= 3)\r\n                                <div class=\"active\">Investigation and Root Cause Analysis</div>\r\n                            @else\r\n                                <div class=\"\">Investigation and Root Cause\r\n                                    Analysis</div>\r\n                            @endif\r\n\r\n                            @if ($data->stage >= 4)\r\n                                <div class=\"active\">CAPA Plan</div>\r\n                            @else\r\n                                <div class=\"\">CAPA Plan</div>\r\n                            @endif\r\n\r\n\r\n                            @if ($data->stage >= 5)\r\n                                <div class=\"active\">Pending Approval</div>\r\n                            @else\r\n                                <div class=\"\">Pending Approval</div>\r\n                            @endif\r\n                            @if ($data->stage >= 6)\r\n                                <div class=\"active\">Pending Actions Completion</div>\r\n                            @else\r\n                                <div class=\"\">Pending Actions Completion</div>\r\n                            @endif\r\n                            @if ($data->stage >= 7)\r\n                                <div class=\"active\">Pending Response Letter</div>\r\n                            @else\r\n                                <div class=\"\">Pending Response Letter</div>\r\n                            @endif\r\n                            @if ($data->stage >= 8)\r\n                                <div class=\"bg-danger\">Closed - Done</div>\r\n                            @else\r\n                                <div class=\"\">Closed - Done</div>\r\n                            @endif\r\n                           \r\n                    @endif\r\n\r\n\r\n                </div>\r\n             \r\n                {{-- ---------------------------------------------------------------------------------------- --}}\r\n            </div>\r\n        </div>\r\n\r\n\r\n        <!-- Tab links -->\r\n        <div class=\"cctab\">\r\n            <button class=\"cctablinks active\" onclick=\"openCity(event, 'CCForm1')\">General Information</button>\r\n            <button class=\"cctablinks\" onclick=\"openCity(event, 'CCForm2')\">HOD/Supervisor Review</button>\r\n            <button class=\"cctablinks\" onclick=\"openCity(event, 'CCForm3')\">Complaint Acknowledgement</button>\r\n\r\n            <button class=\"cctablinks\" onclick=\"openCity(event, 'CCForm4')\">Closure</button>\r\n\r\n            <button class=\"cctablinks\" onclick=\"openCity(event, 'CCForm5')\">Activity Log</button>\r\n\r\n        </div>\r\n\r\n        <form action=\"{{ route('marketcomplaint.marketcomplaintupdate', $data->id) }}\" method=\"POST\"\r\n            enctype=\"multipart/form-data\">\r\n            @csrf\r\n            @method('put')\r\n            <div id=\"step-form\">\r\n                @if (!empty($parent_id))\r\n                    <input type=\"hidden\" name=\"parent_id\" value=\"{{ $parent_id }}\">\r\n                    <input type=\"hidden\" name=\"parent_type\" value=\"{{ $parent_type }}\">\r\n                @endif\r\n                <!-- Tab content -->\r\n                <div id=\"CCForm1\" class=\"inner-block cctabcontent\">\r\n                    <div class=\"inner-block-content\">\r\n                        <div class=\"sub-head\">\r\n                            General Information\r\n                        </div> <!-- RECORD NUMBER -->\r\n                        <div class=\"row\">\r\n\r\n                            <div class=\"col-lg-6\">\r\n                                <div class=\"group-input\">\r\n                                    <label for=\"RLS Record Number\"><b>Record Number</b></label>\r\n                                    {{-- <input disabled type=\"text\" name=\"record\"\r\n                                        value=\"{{ $data->record }}\"> --}}\r\n                                        <input disabled type=\"text\" name=\"record\" id=\"record\"\r\n                                        value=\"{{ $data->initiator_group_code_gi}}/LI/{{ Helpers::year($data->created_at) }}/{{ $data->record }}\">\r\n\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div class=\"col-lg-6\">\r\n                                <div class=\"group-input\">\r\n                                    <label for=\"Division Code\"><b>Division Code </b></label>\r\n                                    <input disabled type=\"text\" name=\"division_code\" value=\"{{ Helpers::getDivisionName(session()->get('division')) }}\">\r\n                                    <input type=\"hidden\" name=\"division_id\" value=\"{{ $data->division_id }}\">\r\n\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div class=\"col-lg-6\">\r\n                                <div class=\"group-input\">\r\n                                    <label for=\"originator\">Initiator</label>\r\n                                    <input disabled type=\"text\" name=\"initiator\" value=\"{{ Auth::user()->name }}\" />\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div class=\"col-lg-6\">\r\n                                <div class=\"group-input \">\r\n                                    <label for=\"Date Due\"><b>Date of Initiation</b></label>\r\n                                    <input disabled type=\"text\" value=\"{{ date('d-M-Y') }}\" name=\"intiation_date\">\r\n                                    <input type=\"hidden\" value=\"{{ date('Y-m-d') }}\" name=\"intiation_date\">\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div class=\"col-md-6 new-date-data-field\">\r\n                                <div class=\"group-input input-date\">\r\n                                    <label for=\"due-date\">Due Date <span class=\"text-danger\"></span></label>\r\n                                    <p class=\"text-primary\"> last date this record should be closed by</p>\r\n\r\n                                    <div class=\"calenderauditee\">\r\n                                        <input type=\"text\" id=\"due_date\" readonly placeholder=\"DD-MMM-YYYY\" value=\"{{ $data->due_date_gi ? \\Carbon\\Carbon::parse($data->due_date_gi)->format('d-M-Y') : '' }}\" />\r\n                                        <input type=\"date\" name=\"due_date_gi\"\r\n                                            min=\"{{ \\Carbon\\Carbon::now()->format('Y-m-d') }}\"\r\n                                            value=\"{{ $data->due_date_gi ?? '' }}\" class=\"hide-input\"\r\n                                            oninput=\"handleDateInput(this, 'due_date')\" />\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <script>\r\n                            function handleDateInput(input, targetId) {\r\n                                const target = document.getElementById(targetId);\r\n                                const date = new Date(input.value);\r\n                                const options = { day: '2-digit', month: 'short', year: 'numeric' };\r\n                                const formattedDate = date.toLocaleDateString('en-US', options).replace(/ /g, '-');\r\n                                target.value = formattedDate;\r\n                            }\r\n                            </script>\r\n\r\n                        <div class=\"col-md-12 mb-3\">\r\n                                    <div class=\"group-input\">\r\n                                        <label for=\"Short Description\">Short Description<span\r\n                                            class=\"text-danger\">*</span></label>\r\n                                            <span id=\"rchars\">255</span>\r\n                                        <div><small class=\"text-primary\">Please insert \"NA\" in the data field if it does\r\n                                                not require completion</small></div>\r\n                                        <input  name=\"description_gi\" {{ $data->stage == 0 || $data->stage == 8 ? \"disabled\" : \"\" }} id=\"summernote-1\" required value=\"{{ $data->description_gi }}\"  >\r\n                                    \r\n                                    </div>\r\n                                </div>\r\n\r\n\r\n                            <div class=\"col-lg-6\">\r\n                                <div class=\"group-input\">\r\n                                    <label for=\"Short Description\">Initiator Group <span class=\"text-danger\"></span></label>\r\n                                    <select name=\"initiator_group\" id=\"initiator_group\" {{ $data->stage == 0 || $data->stage == 8 ? \"disabled\" : \"\" }}>\r\n                                        <option selected disabled>---select---</option>\r\n                                        @foreach (Helpers::getInitiatorGroups() as $code => $initiator_group)\r\n                                            <option value=\"{{ $code }}\" @if ($data->initiator_group == $code) selected @endif>\r\n                                                {{ $initiator_group }}\r\n                                            </option>\r\n                                        @endforeach\r\n                                    </select>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div class=\"col-lg-12\">\r\n                                <div class=\"group-input\">\r\n                                    <label for=\"Initiator Group Code\">Initiator Group Code</label>\r\n                                    <input readonly type=\"text\" name=\"initiator_group_code_gi\" id=\"initiator_group_code_gi\" value=\"{{ $data->initiator_group_code_gi ?? '' }}\" {{ $data->stage == 0 || $data->stage == 8 ? \"disabled\" : \"\" }}>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <script>\r\n                                document.getElementById('initiator_group').addEventListener('change', function() {\r\n                                    var selectedValue = this.value;\r\n                                    document.getElementById('initiator_group_code_gi').value = selectedValue;\r\n                                });\r\n\r\n                                // Set the group code on page load if a value is already selected\r\n                                document.addEventListener('DOMContentLoaded', function() {\r\n                                    var initiatorGroupElement = document.getElementById('initiator_group');\r\n                                    if (initiatorGroupElement.value) {\r\n                                        document.getElementById('initiator_group_code_gi').value = initiatorGroupElement.value;\r\n                                    }\r\n                                });\r\n                            </script>\r\n\r\n                            <div class=\"col-lg-12\">\r\n                                <div class=\"group-input\">\r\n                                    <label for=\"Initiator Group\">Initiated Through</label>\r\n                                    <div><small class=\"text-primary\">Please select related information</small></div>\r\n                                    <select name=\"initiated_through_gi\" {{ $data->stage == 0 || $data->stage == 8 ? \"disabled\" : \"\" }} id=\"initiated_through_gi\">\r\n                                        <option value=\"0\">-- select --</option>\r\n                                        <option value=\"recall\"\r\n                                            {{ $data->initiated_through_gi == 'recall' ? 'selected' : '' }}>Recall</option>\r\n                                        <option value=\"return\"\r\n                                            {{ $data->initiated_through_gi == 'return' ? 'selected' : '' }}>Return</option>\r\n                                        <option value=\"deviation\"\r\n                                            {{ $data->initiated_through_gi == 'deviation' ? 'selected' : '' }}>Deviation\r\n                                        </option>\r\n                                        <option value=\"complaint\"\r\n                                            {{ $data->initiated_through_gi == 'complaint' ? 'selected' : '' }}>Complaint\r\n                                        </option>\r\n                                        <option value=\"regulatory\"\r\n                                            {{ $data->initiated_through_gi == 'regulatory' ? 'selected' : '' }}>Regulatory\r\n                                        </option>\r\n                                        <option value=\"lab-incident\"\r\n                                            {{ $data->initiated_through_gi == 'lab-incident' ? 'selected' : '' }}>Lab\r\n                                            Incident</option>\r\n                                        <option value=\"improvement\"\r\n                                            {{ $data->initiated_through_gi == 'improvement' ? 'selected' : '' }}>\r\n                                            Improvement</option>\r\n                                        <option value=\"others\"\r\n                                            {{ $data->initiated_through_gi == 'others' ? 'selected' : '' }}>Others</option>\r\n                                    </select>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div class=\"col-md-12 mb-3\">\r\n                                <div class=\"group-input\">\r\n                                    <label for=\"If Other\">If Other</label>\r\n                                    <div><small class=\"text-primary\">Please insert \"NA\" in the data field if it does\r\n                                            not require completion</small></div>\r\n                                    <textarea class=\"summernote\" name=\"if_other_gi\" id=\"summernote-1\" {{ $data->stage == 0 || $data->stage == 8 ? \"disabled\" : \"\" }}>{{ $data->if_other_gi }}\r\n                                    </textarea>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div class=\"col-lg-12\">\r\n                                <div class=\"group-input\">\r\n                                    <label for=\"is_repeat_gi\">Is Repeat</label>\r\n                                    <select name=\"is_repeat_gi\" {{ $data->stage == 0 || $data->stage == 8 ? \"disabled\" : \"\" }}>\r\n                                        <option value=\"\" {{ $data->is_repeat_gi == '0' ? 'selected' : '' }}>--\r\n                                            select --</option>\r\n                                        <option value=\"yes\" {{ $data->is_repeat_gi == 'yes' ? 'selected' : '' }}>Yes\r\n                                        </option>\r\n                                        <option value=\"no\" {{ $data->is_repeat_gi == 'no' ? 'selected' : '' }}>No\r\n                                        </option>\r\n                                    </select>\r\n                                </div>\r\n                            </div>\r\n\r\n\r\n                            <div class=\"col-md-12 mb-3\">\r\n                                <div class=\"group-input\">\r\n                                    <label for=\"Repeat Nature\">Repeat Nature</label>\r\n                                    <div><small class=\"text-primary\">Please insert \"NA\" in the data field if it does\r\n                                            not require completion</small></div>\r\n                                    <textarea class=\"summernote\" name=\"repeat_nature_gi\" {{ $data->stage == 0 || $data->stage == 8 ? \"disabled\" : \"\" }} id=\"summernote-1\">{{ $data->repeat_nature_gi }}\r\n\r\n                                    </textarea>\r\n                                </div>\r\n                            </div>\r\n\r\n\r\n\r\n                           \r\n\r\n\r\n                            <div class=\"col-12\">\r\n                    <div class=\"group-input\">\r\n                        <label for=\"Inv Attachments\">Initial Attachment</label>\r\n                        <div>\r\n                            <small class=\"text-primary\">\r\n                                Please Attach all relevant or supporting documents\r\n                            </small>\r\n                        </div>\r\n                        <div class=\"file-attachment-field\">\r\n                            <div class=\"file-attachment-list\" id=\"initial_attachment_gi\">\r\n\r\n                                @if ($data->initial_attachment_gi)\r\n                                    @foreach (json_decode($data->initial_attachment_gi) as $file)\r\n                                        <h6 type=\"button\" class=\"file-container text-dark\"\r\n                                            style=\"background-color: rgb(243, 242, 240);\">\r\n                                            <b>{{ $file }}</b>\r\n                                            <a href=\"{{ asset('upload/' . $file) }}\" target=\"_blank\"><i\r\n                                                    class=\"fa fa-eye text-primary\"\r\n                                                    style=\"font-size:20px; margin-right:-10px;\"></i></a>\r\n                                            <a type=\"button\" class=\"remove-file\"\r\n                                                data-file-name=\"{{ $file }}\"><i\r\n                                                    class=\"fa-solid fa-circle-xmark\"\r\n                                                    style=\"color:red; font-size:20px;\"></i></a>\r\n                                        </h6>\r\n                                    @endforeach\r\n                                @endif\r\n                            </div>\r\n                            <div class=\"add-btn\">\r\n                                <div>Add</div>\r\n                                <input type=\"file\" id=\"initial_attachment_gi\" name=\"initial_attachment_gi[]\"\r\n                                    oninput=\"addMultipleFiles(this,'initial_attachment_gi')\" multiple>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                            <div class=\"col-lg-6\">\r\n                                <div class=\"group-input\">\r\n                                    <label for=\"Initiator Group\">Complainant</label>\r\n                                    <select name=\"complainant_gi\" onchange=\"\" {{ $data->stage == 0 || $data->stage == 8 ? \"disabled\" : \"\" }}>\r\n                                        <option value=\"\"{{ $data->complainant_gi == 'o' ? 'selected' : '' }}>--\r\n                                            select --</option>\r\n                                        <option value=\"person\"{{ $data->complainant_gi == 'person' ? 'selected' : '' }}>\r\n                                            person</option>\r\n\r\n                                    </select>\r\n                                </div>\r\n                            </div>\r\n\r\n                            {{-- <div class=\"col-lg-6 new-date-data-field\">\r\n                                <div class=\"group-input input-date\">\r\n                                    <label for=\"OOC Logged On\"> Complaint Reported On </label>\r\n\r\n                                    <div class=\"calenderauditee\">\r\n                                        <input type=\"text\" id=\"due_date\"\r\n                                            min=\"{{ \\Carbon\\Carbon::now()->format('Y-m-d') }}\" readonly\r\n                                            placeholder=\"DD-MM-YYYY\" name=\"complaint_reported_on_gi\"\r\n                                            value=\"{{ $data->complaint_reported_on_gi }}\" />\r\n\r\n                                    </div>\r\n\r\n\r\n                                </div>\r\n                            </div> --}}\r\n                            <div class=\"col-lg-6 new-date-data-field\">\r\n                                <div class=\"group-input input-date\">\r\n                                    <label for=\"OOC Logged On\">Complaint Reported On</label>\r\n                                    <div class=\"calenderauditee\">\r\n                                        <input type=\"text\" id=\"compalint_dat\" readonly placeholder=\"DD-MMM-YYYY\" value=\"{{ $data->complaint_reported_on_gi ? \\Carbon\\Carbon::parse($data->complaint_reported_on_gi)->format('d-M-Y') : '' }}\" {{ $data->stage == 0 || $data->stage == 8 ? \"disabled\" : \"\" }} />\r\n                                        <input type=\"date\" name=\"complaint_reported_on_gi\"\r\n                                        min=\"{{ \\Carbon\\Carbon::now()->format('Y-m-d') }}\"\r\n                                        value=\"{{ $data->complaint_reported_on_gi }}\"  class=\"hide-input\" oninput=\"handleDateInput(this, 'compalint_dat')\" />\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <script>\r\n                                document.addEventListener('DOMContentLoaded', (event) => {\r\n                                    const dateInput = document.getElementById('complaint_date_picker');\r\n                                    const today = new Date().toISOString().split('T')[0];\r\n                                    dateInput.setAttribute('max', today);\r\n\r\n                                    // Show the date picker when clicking on the readonly input\r\n                                    const readonlyInput = document.getElementById('compalint_dat');\r\n                                    readonlyInput.addEventListener('click', () => {\r\n                                        dateInput.style.display = 'block';\r\n                                        dateInput.focus();\r\n                                    });\r\n\r\n                                    // Update the readonly input when a date is selected\r\n                                    dateInput.addEventListener('change', () => {\r\n                                        readonlyInput.value = new Date(dateInput.value).toLocaleDateString('en-GB');\r\n                                        dateInput.style.display = 'none';\r\n                                    });\r\n\r\n                                    // If there is an existing date, set the readonly input's value\r\n                                    if (dateInput.value) {\r\n                                        readonlyInput.value = new Date(dateInput.value).toLocaleDateString('en-GB');\r\n                                    }\r\n                                });\r\n                            </script>\r\n\r\n                            <div class=\"col-md-12 mb-3\">\r\n                                <div class=\"group-input\">\r\n                                    <label for=\"Details Of Nature Market Complaint\">Details Of Nature Market\r\n                                        Complaint</label>\r\n                                    <div><small class=\"text-primary\">Please insert \"NA\" in the data field if it does\r\n                                            not require completion</small></div>\r\n                                    <textarea class=\"summernote\" name=\"details_of_nature_market_complaint_gi\" id=\"summernote-1\">{{ $data->details_of_nature_market_complaint_gi }}\r\n                                    </textarea>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div class=\"col-12\">\r\n                                <div class=\"group-input\">\r\n                                    <label for=\"root_cause\">\r\n                                        Product Details\r\n                                        <button type=\"button\" id=\"Details\">+</button>\r\n                                        <span class=\"text-primary\" data-bs-toggle=\"modal\"\r\n                                            data-bs-target=\"#document-details-field-instruction-modal\"\r\n                                            style=\"font-size: 0.8rem; font-weight: 400; cursor: pointer;\">\r\n                                            (Launch Instruction)\r\n                                        </span>\r\n                                    </label>\r\n                                    {{-- <div class=\"table-responsive\"> --}}\r\n                                    <table class=\"table table-bordered\" id=\"ProductsDetails\" style=\"width: 100%;\">\r\n                                        <thead>\r\n                                            <tr>\r\n                                                <th style=\"width: 100px;\">Row #</th>\r\n                                                <th>Product Name</th>\r\n                                                <th>Batch No.</th>\r\n                                                <th>Mfg. Date</th>\r\n                                                <th>Exp. Date</th>\r\n                                                <th>Batch Size</th>\r\n                                                <th>Pack Size</th>\r\n                                                <th>Dispatch Quantity</th>\r\n                                                <th>Remarks</th>\r\n                                                <th>Action</th>\r\n\r\n                                            </tr>\r\n                                        </thead>\r\n                                        <tbody>\r\n                                            @php\r\n                                            $productsdetails = 1;\r\n                                        @endphp\r\n                                        @if (!empty($productsgi) && is_array($productsgi->data))\r\n                                            @foreach ($productsgi->data as $index => $detail)\r\n                                                <tr>\r\n                                                    <td>{{ $productsdetails++ }}</td>\r\n                                                    <td><input type=\"text\" name=\"serial_number_gi[{{ $index }}][info_product_name]\" value=\"{{ array_key_exists('info_product_name', $detail) ? $detail['info_product_name'] : '' }}\"></td>\r\n                                                    <td><input type=\"text\" name=\"serial_number_gi[{{ $index }}][info_batch_no]\" value=\"{{ array_key_exists('info_batch_no', $detail) ? $detail['info_batch_no'] : '' }}\"></td>\r\n                                                    <td>\r\n                                                        <div class=\"new-date-data-field\">\r\n                                                            <div class=\"group-input input-date\">\r\n                                                                <div class=\"calenderauditee\">\r\n                                                                    <input\r\n                                                                        class=\"click_date\"\r\n                                                                        id=\"date_{{ $index }}_mfg_date\"\r\n                                                                        type=\"text\"\r\n                                                                        name=\"serial_number_gi[{{ $index }}][info_mfg_date]\"\r\n                                                                        placeholder=\"DD-MMM-YYYY\"\r\n                                                                        value=\"{{ !empty($detail['info_mfg_date']) ? \\Carbon\\Carbon::parse($detail['info_mfg_date'])->format('d-M-Y') : '' }}\"\r\n                                                                    />\r\n                                                                    <input\r\n                                                                        type=\"date\"\r\n                                                                        name=\"serial_number_gi[{{ $index }}][info_mfg_date]\"\r\n                                                                        value=\"{{ !empty($detail['info_mfg_date']) ? \\Carbon\\Carbon::parse($detail['info_mfg_date'])->format('Y-m-d') : '' }}\"\r\n                                                                        id=\"date_{{ $index }}_mfg_date_picker\"\r\n                                                                        class=\"hide-input show_date\"\r\n                                                                        style=\"position: absolute; top: 0; left: 0; opacity: 0;\"\r\n                                                                        onchange=\"handleDateInput(this, 'date_{{ $index }}_mfg_date')\"\r\n                                                                    />\r\n                                                                </div>\r\n                                                            </div>\r\n                                                        </div>\r\n                                                    </td>\r\n                                                    <td>\r\n                                                        <div class=\"new-date-data-field\">\r\n                                                            <div class=\"group-input input-date\">\r\n                                                                <div class=\"calenderauditee\">\r\n                                                                    <input\r\n                                                                        class=\"click_date\"\r\n                                                                        id=\"date_{{ $index }}_expiry_date\"\r\n                                                                        type=\"text\"\r\n                                                                        name=\"serial_number_gi[{{ $index }}][info_expiry_date]\"\r\n                                                                        placeholder=\"DD-MMM-YYYY\"\r\n                                                                        value=\"{{ !empty($detail['info_expiry_date']) ? \\Carbon\\Carbon::parse($detail['info_expiry_date'])->format('d-M-Y') : '' }}\"\r\n                                                                    />\r\n                                                                    <input\r\n                                                                        type=\"date\"\r\n                                                                        name=\"serial_number_gi[{{ $index }}][info_expiry_date]\"\r\n                                                                        value=\"{{ !empty($detail['info_expiry_date']) ? \\Carbon\\Carbon::parse($detail['info_expiry_date'])->format('Y-m-d') : '' }}\"\r\n                                                                        id=\"date_{{ $index }}_expiry_date_picker\"\r\n                                                                        class=\"hide-input show_date\"\r\n                                                                        style=\"position: absolute; top: 0; left: 0; opacity: 0;\"\r\n                                                                        onchange=\"handleDateInput(this, 'date_{{ $index }}_expiry_date')\"\r\n                                                                    />\r\n                                                                </div>\r\n                                                            </div>\r\n                                                        </div>\r\n                                                    </td>\r\n                                                    <td><input type=\"text\" name=\"serial_number_gi[{{ $index }}][info_batch_size]\" value=\"{{ array_key_exists('info_batch_size', $detail) ? $detail['info_batch_size'] : '' }}\"></td>\r\n                                                    <td><input type=\"text\" name=\"serial_number_gi[{{ $index }}][info_pack_size]\" value=\"{{ array_key_exists('info_pack_size', $detail) ? $detail['info_pack_size'] : '' }}\"></td>\r\n                                                    <td><input type=\"text\" name=\"serial_number_gi[{{ $index }}][info_dispatch_quantity]\" value=\"{{ array_key_exists('info_dispatch_quantity', $detail) ? $detail['info_dispatch_quantity'] : '' }}\"></td>\r\n                                                    <td><input type=\"text\" name=\"serial_number_gi[{{ $index }}][info_remarks]\" value=\"{{ array_key_exists('info_remarks', $detail) ? $detail['info_remarks'] : '' }}\"></td>\r\n                                                    <td><button type=\"button\" class=\"removeRowBtn\">Remove</button></td>\r\n                                                </tr>\r\n                                            @endforeach\r\n                                        @else\r\n                                            <tr>\r\n                                                <td colspan=\"9\">No product details found</td>\r\n                                            </tr>\r\n                                        @endif\r\n                                        \r\n                                        </tbody>\r\n                                    </table>\r\n                                    {{-- </div> --}}\r\n                                </div>\r\n                            </div>\r\n\r\n\r\n                            <script>\r\n                                $(document).ready(function() {\r\n                                    let indexDetail = {{ ($productsgi && is_array($productsgi->data)) ? count($productsgi->data) : 0 }};\r\n                                    $('#Details').click(function(e) {\r\n                                        e.preventDefault();\r\n\r\n                                        function generateTableRow(serialNumber) {\r\n                                            var html =\r\n                                                '<tr>' +\r\n                                                '<td><input disabled type=\"text\" name=\"serial_number_gi[' + serialNumber + '][serial]\" value=\"' + (serialNumber + 1) + '\"></td>' +\r\n                                                '<td><input type=\"text\" name=\"serial_number_gi[' + indexDetail + '][info_product_name]\"></td>' +\r\n                                                '<td><input type=\"text\" name=\"serial_number_gi[' + indexDetail + '][info_batch_no]\"></td>' +\r\n                                                '<td> <div class=\"new-date-data-field\"><div class=\"group-input input-date\"> <div class=\"calenderauditee\"><input id=\"date_'+ indexDetail +'_mfg_date\" type=\"text\" name=\"serial_number_gi[' + indexDetail + '][info_mfg_date]\" placeholder=\"DD-MMM-YYYY\" /> <input type=\"date\" name=\"serial_number_gi[' + indexDetail + '][info_mfg_date]\" min=\"{{ \\Carbon\\Carbon::now()->format(\"Y-m-d\") }}\" value=\"{{ \\Carbon\\Carbon::now()->format(\"Y-m-d\") }}\" id=\"date_'+ indexDetail +'_mfg_date\" class=\"hide-input show_date\" style=\"position: absolute; top: 0; left: 0; opacity: 0;\" oninput=\"handleDateInput(this, \\'date_'+ indexDetail +'_mfg_date\\')\" /> </div> </div></div></td>' +\r\n                                                '<td>  <div class=\"new-date-data-field\"><div class=\"group-input input-date\"><div class=\"calenderauditee\"><input id=\"date_'+ indexDetail +'_expiry_date\" type=\"text\" name=\"serial_number_gi[' + indexDetail + '][info_expiry_date]\" placeholder=\"DD-MMM-YYYY\" /> <input type=\"date\" name=\"serial_number_gi[' + indexDetail + '][info_expiry_date]\" min=\"{{ \\Carbon\\Carbon::now()->format(\"Y-m-d\") }}\" value=\"{{ \\Carbon\\Carbon::now()->format(\"Y-m-d\") }}\" id=\"date_'+ indexDetail +'_expiry_date\" class=\"hide-input show_date\" style=\"position: absolute; top: 0; left: 0; opacity: 0;\" oninput=\"handleDateInput(this, \\'date_'+ indexDetail +'_expiry_date\\')\" /> </div> </div></div></td>' +\r\n                                                '<td><input type=\"text\" name=\"serial_number_gi[' + indexDetail + '][info_batch_size]\"></td>' +\r\n                                                '<td><input type=\"text\" name=\"serial_number_gi[' + indexDetail + '][info_pack_size]\"></td>' +\r\n                                                '<td><input type=\"text\" name=\"serial_number_gi[' + indexDetail + '][info_dispatch_quantity]\"></td>' +\r\n                                                '<td><input type=\"text\" name=\"serial_number_gi[' + indexDetail + '][info_remarks]\"></td>' +\r\n                                                '<td><button type=\"text\" class=\"removeRowBtn\" \">Remove</button></td>' +\r\n                                                '</tr>';\r\n                                                indexDetail++;\r\n                                            return html;\r\n                                        }\r\n\r\n                                        var tableBody = $('#ProductsDetails tbody');\r\n                                        var rowCount = tableBody.children('tr').length;\r\n                                        var newRow = generateTableRow(rowCount);\r\n                                        tableBody.append(newRow);\r\n                                    });\r\n                                });\r\n                            </script>\r\n\r\n                            <div class=\"col-12\">\r\n                                <div class=\"group-input\">\r\n                                    <label for=\"root_cause\">\r\n                                        Traceability\r\n                                        <button type=\"button\" id=\"traceblity_add\">+</button>\r\n                                        <span class=\"text-primary\" data-bs-toggle=\"modal\" data-bs-target=\"#document-details-field-instruction-modal\" style=\"font-size: 0.8rem; font-weight: 400; cursor: pointer;\">\r\n                                            (Launch Instruction)\r\n                                        </span>\r\n                                    </label>\r\n                                    <div class=\"table-responsive\">\r\n                                        <table class=\"table table-bordered\" id=\"traceblity\" style=\"width: 100%;\">\r\n                                            <thead>\r\n                                                <tr>\r\n                                                    <th style=\"width: 100px;\">Row #</th>\r\n                                                    <th>Product Name</th>\r\n                                                    <th>Batch No.</th>\r\n                                                    <th>Manufacturing Location</th>\r\n                                                    <th>Remarks</th>\r\n                                                    <th>Action</th>\r\n                                                </tr>\r\n                                            </thead>\r\n                                            <tbody>\r\n                                                @php\r\n                                                    $traceabilityIndex = 1;\r\n                                                @endphp\r\n                                                @if (!empty($traceability_gi))\r\n                                                    @foreach ($traceability_gi->data as $index => $tracebil)\r\n                                                        <tr>\r\n                                                            <td><input disabled type=\"text\" name=\"trace_ability[{{ $index }}][serial]\" value=\"{{ $traceabilityIndex++ }}\"></td>\r\n                                                            <td><input type=\"text\" name=\"trace_ability[{{ $index }}][product_name_tr]\" value=\"{{ $tracebil['product_name_tr'] }}\"></td>\r\n                                                            <td><input type=\"text\" name=\"trace_ability[{{ $index }}][batch_no_tr]\" value=\"{{ $tracebil['batch_no_tr'] }}\"></td>\r\n                                                            <td><input type=\"text\" name=\"trace_ability[{{ $index }}][manufacturing_location_tr]\" value=\"{{ $tracebil['manufacturing_location_tr'] }}\"></td>\r\n                                                            <td><input type=\"text\" name=\"trace_ability[{{ $index }}][remarks_tr]\" value=\"{{ $tracebil['remarks_tr'] }}\"></td>\r\n                                                           <td><button type=\"text\" class=\"removeRowBtn\" >Remove</button></td>\r\n\r\n                                                        </tr>\r\n                                                    @endforeach\r\n                                                @else\r\n                                                    <tr>\r\n                                                        <td colspan=\"5\">No found</td>\r\n                                                     </tr>\r\n                                                @endif\r\n                                            </tbody>\r\n                                        </table>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <script>\r\n                                $(document).ready(function() {\r\n                                    $('#traceblity_add').click(function(e) {\r\n                                        e.preventDefault();\r\n\r\n                                        function generateTableRow(serialNumber) {\r\n                                            var html =\r\n                                                '<tr>' +\r\n                                                '<td><input disabled type=\"text\" name=\"trace_ability[' + serialNumber + '][serial]\" value=\"' + (serialNumber + 1) + '\"></td>' +\r\n                                                '<td><input type=\"text\" name=\"trace_ability[' + serialNumber + '][product_name_tr]\"></td>' +\r\n                                                '<td><input type=\"text\" name=\"trace_ability[' + serialNumber + '][batch_no_tr]\"></td>' +\r\n                                                '<td><input type=\"text\" name=\"trace_ability[' + serialNumber + '][manufacturing_location_tr]\"></td>' +\r\n                                                '<td><input type=\"text\" name=\"trace_ability[' + serialNumber + '][remarks_tr]\"></td>' +\r\n                                                '<td><button type=\"text\" class=\"removeRowBtn\" >Remove</button></td>' +\r\n\r\n                                                '</tr>';\r\n                                            return html;\r\n                                        }\r\n\r\n                                        var tableBody = $('#traceblity tbody');\r\n                                        var rowCount = tableBody.children('tr').length;\r\n                                        var newRow = generateTableRow(rowCount);\r\n                                        tableBody.append(newRow);\r\n                                    });\r\n                                });\r\n                            </script>\r\n\r\n\r\n                            <div class=\"col-lg-12\">\r\n                                <div class=\"group-input\">\r\n                                    <label for=\"Initiator Group\">Categorization of complaint</label>\r\n                                    <select name=\"categorization_of_complaint_gi\" onchange=\"\">\r\n                                        <option value=\"\">-- select --</option>\r\n                                        <option value=\"Critical\" {{ $data->categorization_of_complaint_gi == 'Critical' ? 'selected' : '' }}>Critical</option>\r\n                                        <option value=\"Major\" {{ $data->categorization_of_complaint_gi == 'Major' ? 'selected' : '' }}>Major</option>\r\n                                        <option value=\"Minor\" {{ $data->categorization_of_complaint_gi == 'Minor' ? 'selected' : '' }}>Minor</option>\r\n                                    </select>\r\n                                </div>\r\n                            </div>\r\n\r\n\r\n                            <div class=\"col-md-12 mb-3\">\r\n                                <div class=\"group-input\">\r\n                                    <label for=\"Review of Complaint Sample\">Review of Complaint Sample</label>\r\n                                    <div><small class=\"text-primary\">Please insert \"NA\" in the data field if it does\r\n                                            not require completion</small></div>\r\n                                    <textarea class=\"summernote\" name=\"review_of_complaint_sample_gi\" id=\"summernote-1\">{{ $data->review_of_complaint_sample_gi }}\r\n                                    </textarea>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div class=\"col-md-12 mb-3\">\r\n                                <div class=\"group-input\">\r\n                                    <label for=\"Review of Control Sample\">Review of Control Sample</label>\r\n                                    <div><small class=\"text-primary\">Please insert \"NA\" in the data field if it does\r\n                                            not require completion</small></div>\r\n                                    <textarea class=\"summernote\" name=\"review_of_control_sample_gi\" id=\"summernote-1\">{{ $data->review_of_control_sample_gi }}\r\n                                    </textarea>\r\n                                </div>\r\n                            </div>\r\n\r\n\r\n                            <div class=\"col-12\">\r\n                                <div class=\"group-input\">\r\n                                    <label for=\"root_cause\">\r\n                                        Investigation Team\r\n                                        <button type=\"button\" id=\"investigation_team_add\">+</button>\r\n                                        <span class=\"text-primary\" data-bs-toggle=\"modal\" data-bs-target=\"#document-details-field-instruction-modal\" style=\"font-size: 0.8rem; font-weight: 400; cursor: pointer;\">\r\n                                            (Launch Instruction)\r\n                                        </span>\r\n                                    </label>\r\n                                    <div class=\"table-responsive\">\r\n                                        <table class=\"table table-bordered\" id=\"Investing_team\" style=\"width: 100%;\">\r\n                                            <thead>\r\n                                                <tr>\r\n                                                    <th style=\"width: 100px;\">Row #</th>\r\n                                                    <th>Name</th>\r\n                                                    <th>Department</th>\r\n                                                    <th>Remarks</th>\r\n                                                    <th>Action</th>\r\n\r\n                                                </tr>\r\n                                            </thead>\r\n                                            <tbody>\r\n                                                @php\r\n                                                    $investingTeamIndex = 1;\r\n                                                @endphp\r\n                                                @if (!empty($investing_team))\r\n                                                    @foreach ($investing_team->data as $index => $inves)\r\n                                                        <tr>\r\n                                                            <td><input disabled type=\"text\" name=\"Investing_team[{{ $index }}][serial]\" value=\"{{ $investingTeamIndex++ }}\"></td>\r\n                                                            <td><input type=\"text\" name=\"Investing_team[{{ $index }}][name_inv_tem]\" value=\"{{ $inves['name_inv_tem'] }}\"></td>\r\n                                                            <td><input type=\"text\" name=\"Investing_team[{{ $index }}][department_inv_tem]\" value=\"{{ $inves['department_inv_tem'] }}\"></td>\r\n                                                            <td><input type=\"text\" name=\"Investing_team[{{ $index }}][remarks_inv_tem]\" value=\"{{ $inves['remarks_inv_tem'] }}\"></td>\r\n                                                             <td><button type=\"text\" class=\"removeRowBtn\" >Remove</button></td>\r\n\r\n                                                        </tr>\r\n                                                    @endforeach\r\n                                                @else\r\n                                                    <tr>\r\n                                                        <td colspan=\"4\">No data found</td>\r\n                                                    </tr>\r\n                                                @endif\r\n                                            </tbody>\r\n                                        </table>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <script>\r\n                                $(document).ready(function() {\r\n                                    $('#investigation_team_add').click(function(e) {\r\n                                        e.preventDefault();\r\n\r\n                                        function generateTableRow(serialNumber) {\r\n                                            var html =\r\n                                                '<tr>' +\r\n                                                '<td><input disabled type=\"text\" name=\"Investing_team[' + serialNumber + '][serial]\" value=\"' + (serialNumber + 1) + '\"></td>' +\r\n                                                '<td><input type=\"text\" name=\"Investing_team[' + serialNumber + '][name_inv_tem]\"></td>' +\r\n                                                '<td><input type=\"text\" name=\"Investing_team[' + serialNumber + '][department_inv_tem]\"></td>' +\r\n                                                '<td><input type=\"text\" name=\"Investing_team[' + serialNumber + '][remarks_inv_tem]\"></td>' +\r\n                                                '<td><button type=\"text\" class=\"removeRowBtn\" >Remove</button></td>' +\r\n\r\n                                                '</tr>';\r\n                                            return html;\r\n                                        }\r\n\r\n                                        var tableBody = $('#Investing_team tbody');\r\n                                        var rowCount = tableBody.children('tr').length;\r\n                                        var newRow = generateTableRow(rowCount);\r\n                                        tableBody.append(newRow);\r\n                                    });\r\n                                });\r\n                            </script>\r\n\r\n                            <div class=\"col-md-12 mb-3\">\r\n                                <div class=\"group-input\">\r\n                                    <label for=\"Review of Batch manufacturing record (BMR)\">Review\r\n                                        of Batch manufacturing\r\n                                        record (BMR)</label>\r\n                                    <div><small class=\"text-primary\">Please insert \"NA\" in the data field if it does\r\n                                            not require completion</small></div>\r\n                                    <textarea class=\"summernote\" name=\"review_of_batch_manufacturing_record_BMR_gi\" id=\"summernote-1\">{{ $data->review_of_batch_manufacturing_record_BMR_gi }}\r\n                                    </textarea>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div class=\"col-md-12 mb-3\">\r\n                                <div class=\"group-input\">\r\n                                    <label\r\n                                        for=\"Review of Raw materials used in batch\r\n                                        manufacturing\">Review\r\n                                        of Raw materials used in batch\r\n                                        manufacturing</label>\r\n                                    <div><small class=\"text-primary\">Please insert \"NA\" in the data field if it does\r\n                                            not require completion</small></div>\r\n                                    <textarea class=\"summernote\" name=\"review_of_raw_materials_used_in_batch_manufacturing_gi\" id=\"summernote-1\">{{ $data->review_of_raw_materials_used_in_batch_manufacturing_gi }}\r\n                                    </textarea>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div class=\"col-md-12 mb-3\">\r\n                                <div class=\"group-input\">\r\n                                    <label for=\"Review of Batch Packing record (BPR)\">Review of Batch Packing record\r\n                                        (BPR)</label>\r\n                                    <div><small class=\"text-primary\">Please insert \"NA\" in the data field if it does\r\n                                            not require completion</small></div>\r\n                                    <textarea class=\"summernote\" name=\"review_of_Batch_Packing_record_bpr_gi\" id=\"summernote-1\">{{ $data->review_of_Batch_Packing_record_bpr_gi }}\r\n                                    </textarea>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div class=\"col-md-12 mb-3\">\r\n                                <div class=\"group-input\">\r\n                                    <label for=\"Review of packing materials used in batch packing\">Review of packing\r\n                                        materials used in batch\r\n                                        packing</label>\r\n                                    <div><small class=\"text-primary\">Please insert \"NA\" in the data field if it does\r\n                                            not require completion</small></div>\r\n                                    <textarea class=\"summernote\" name=\"review_of_packing_materials_used_in_batch_packing_gi\" id=\"summernote-1\">{{ $data->review_of_packing_materials_used_in_batch_packing_gi }}\r\n                                    </textarea>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div class=\"col-md-12 mb-3\">\r\n                                <div class=\"group-input\">\r\n                                    <label for=\"Review of Analytical Data\">Review of Analytical Data</label>\r\n                                    <div><small class=\"text-primary\">Please insert \"NA\" in the data field if it does\r\n                                            not require completion</small></div>\r\n                                    <textarea class=\"summernote\" name=\"review_of_analytical_data_gi\" id=\"summernote-1\">{{ $data->review_of_analytical_data_gi }}\r\n                                    </textarea>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div class=\"col-md-12 mb-3\">\r\n                                <div class=\"group-input\">\r\n                                    <label for=\"Review of training record of Concern Persons\">Review of training record\r\n                                        of Concern Persons</label>\r\n                                    <div><small class=\"text-primary\">Please insert \"NA\" in the data field if it does\r\n                                            not require completion</small></div>\r\n                                    <textarea class=\"summernote\" name=\"review_of_training_record_of_concern_persons_gi\" id=\"summernote-1\">{{ $data->review_of_training_record_of_concern_persons_gi }}\r\n                                    </textarea>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div class=\"col-md-12 mb-3\">\r\n                                <div class=\"group-input\">\r\n                                    <label for=\"Review of Equipment/Instrument qualification/Calibration record\">Review\r\n                                        of Equipment/Instrument qualification/Calibration record</label>\r\n                                    <div><small class=\"text-primary\">Please insert \"NA\" in the data field if it does\r\n                                            not require completion</small></div>\r\n                                    <textarea class=\"summernote\" name=\"rev_eq_inst_qual_calib_record_gi\" id=\"summernote-1\">{{ $data->rev_eq_inst_qual_calib_record_gi }}\r\n                                    </textarea>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div class=\"col-md-12 mb-3\">\r\n                                <div class=\"group-input\">\r\n                                    <label for=\"Review of Equipment Break-down and Maintainance Record\">Review of\r\n                                        Equipment Break-down and Maintainance Record</label>\r\n                                    <div><small class=\"text-primary\">Please insert \"NA\" in the data field if it does\r\n                                            not require completion</small></div>\r\n                                    <textarea class=\"summernote\" name=\"review_of_equipment_break_down_and_maintainance_record_gi\" id=\"summernote-1\">{{ $data->review_of_equipment_break_down_and_maintainance_record_gi }}\r\n                                    </textarea>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div class=\"col-md-12 mb-3\">\r\n                                <div class=\"group-input\">\r\n                                    <label for=\"Review of Past history of product\">Review of Past history of\r\n                                        product</label>\r\n                                    <div><small class=\"text-primary\">Please insert \"NA\" in the data field if it does\r\n                                            not require completion</small></div>\r\n                                    <textarea class=\"summernote\" name=\"review_of_past_history_of_product_gi\" id=\"summernote-1\">{{ $data->review_of_past_history_of_product_gi }}\r\n                                    </textarea>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div class=\"col-12\">\r\n                                <div class=\"group-input\">\r\n                                    <label for=\"root_cause\">\r\n                                        Brain Storming Session/Discussion with Concerned Person\r\n                                        <button type=\"button\" id=\"brain-stroming\">+</button>\r\n                                        <span class=\"text-primary\" data-bs-toggle=\"modal\" data-bs-target=\"#document-details-field-instruction-modal\" style=\"font-size: 0.8rem; font-weight: 400; cursor: pointer;\">\r\n                                            (Launch Instruction)\r\n                                        </span>\r\n                                    </label>\r\n                                    <div class=\"table-responsive\">\r\n                                        <table class=\"table table-bordered\" id=\"brain_stroming_details\" style=\"width: 100%;\">\r\n                                            <thead>\r\n                                                <tr>\r\n                                                    <th style=\"width: 100px;\">Row #</th>\r\n                                                    <th>Possibility</th>\r\n                                                    <th>Facts/Controls</th>\r\n                                                    <th>Probable Cause</th>\r\n                                                    <th>Remarks</th>\r\n                                                    <th>Action</th>\r\n\r\n                                                </tr>\r\n                                            </thead>\r\n                                            <tbody>\r\n                                                @php\r\n                                                    $brainindex = 1;\r\n                                                @endphp\r\n                                                @if (!empty($brain_stroming_details))\r\n                                                    @foreach ($brain_stroming_details->data as $index => $bra_st_s)\r\n                                                        <tr>\r\n                                                            <td><input disabled type=\"text\" name=\"brain_stroming_details[{{ $index }}][serial]\" value=\"{{ $brainindex++ }}\"></td>\r\n                                                            <td><input type=\"text\" name=\"brain_stroming_details[{{ $index }}][possibility_bssd]\" value=\"{{ $bra_st_s['possibility_bssd'] }}\"></td>\r\n                                                            <td><input type=\"text\" name=\"brain_stroming_details[{{ $index }}][factscontrols_bssd]\" value=\"{{ $bra_st_s['factscontrols_bssd'] }}\"></td>\r\n                                                            <td><input type=\"text\" name=\"brain_stroming_details[{{ $index }}][probable_cause_bssd]\" value=\"{{ $bra_st_s['probable_cause_bssd'] }}\"></td>\r\n                                                            <td><input type=\"text\" name=\"brain_stroming_details[{{ $index }}][remarks_bssd]\" value=\"{{ $bra_st_s['remarks_bssd'] }}\"></td>\r\n                                                              <td><button type=\"button\" class=\"removeRowBtn\">Remove</button></td>\r\n\r\n                                                        </tr>\r\n                                                    @endforeach\r\n                                                @else\r\n                                                    <tr>\r\n                                                        <td colspan=\"5\">No product details found</td>\r\n                                                    </tr>\r\n                                                @endif\r\n                                            </tbody>\r\n                                        </table>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <script>\r\n                                $(document).ready(function() {\r\n                                    $('#brain-stroming').click(function(e) {\r\n                                        e.preventDefault();\r\n\r\n                                        function generateTableRow(serialNumber) {\r\n                                            var html =\r\n                                                '<tr>' +\r\n                                                '<td><input disabled type=\"text\" name=\"brain_stroming_details[' + serialNumber + '][serial]\" value=\"' + (serialNumber + 1) + '\"></td>' +\r\n                                                '<td><input type=\"text\" name=\"brain_stroming_details[' + serialNumber + '][possibility_bssd]\"></td>' +\r\n                                                '<td><input type=\"text\" name=\"brain_stroming_details[' + serialNumber + '][factscontrols_bssd]\"></td>' +\r\n                                                '<td><input type=\"text\" name=\"brain_stroming_details[' + serialNumber + '][probable_cause_bssd]\"></td>' +\r\n                                                '<td><input type=\"text\" name=\"brain_stroming_details[' + serialNumber + '][remarks_bssd]\"></td>' +\r\n                                                '<td><button type=\"button\" class=\"removeRowBtn\">Remove</button></td>' +\r\n\r\n                                                '</tr>';\r\n                                            return html;\r\n                                        }\r\n\r\n                                        var tableBody = $('#brain_stroming_details tbody');\r\n                                        var rowCount = tableBody.children('tr').length;\r\n                                        var newRow = generateTableRow(rowCount);\r\n                                        tableBody.append(newRow);\r\n                                    });\r\n                                });\r\n                            </script>\r\n\r\n\r\n                            <div class=\"button-block\">\r\n                                <button type=\"submit\" class=\"saveButton\" id=\"saveButton\"\r\n                            @if ($data->stage == 8) onclick=\"showAlert(event)\" @endif>Save</button>\r\n\r\n                        <div id=\"alert-message\" style=\"display:none;\">\r\n                            Your stage is Closed - Done You Cannot Edit or Save.\r\n                        </div>\r\n                           \r\n\r\n                        <script>\r\n                            function showAlert(event) {\r\n                                event.preventDefault(); // Prevent form submission\r\n                                var alertMessage = document.getElementById('alert-message').innerText;\r\n                                alert(alertMessage);\r\n                            }\r\n                        \r\n                            document.addEventListener('DOMContentLoaded', function () {\r\n                                var stage = {{ $data->stage }};\r\n                                \r\n                              \r\n                            });\r\n                        </script>\r\n                        \r\n                                <button type=\"button\" class=\"nextButton\" onclick=\"nextStep()\">Next</button>\r\n\r\n                                <button type=\"button\"> <a class=\"text-white\" href=\"{{ url('rcms/qms-dashboard') }}\">\r\n                                        Exit </a> </button>\r\n\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div id=\"CCForm2\" class=\"inner-block cctabcontent\">\r\n                    <div class=\"inner-block-content\">\r\n                        <div class=\"row\">\r\n                            <div class=\"sub-head col-12\">HOD/Supervisor Review</div>\r\n\r\n\r\n\r\n                            <div class=\"col-md-12 mb-3\">\r\n                                <div class=\"group-input\">\r\n                                    <label for=\"Conclusion\">Conclusion</label>\r\n                                    <div><small class=\"text-primary\">Please insert \"NA\" in the data field if it does\r\n                                            not require completion</small></div>\r\n                                    <textarea class=\"summernote\" name=\"conclusion_hodsr\" id=\"summernote-1\">{{ $data->conclusion_hodsr }}\r\n                                    </textarea>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div class=\"col-md-12 mb-3\">\r\n                                <div class=\"group-input\">\r\n                                    <label for=\"Root Cause Analysis\">Root Cause Analysis</label>\r\n                                    <div><small class=\"text-primary\">Please insert \"NA\" in the data field if it does\r\n                                            not require completion</small></div>\r\n                                    <textarea class=\"summernote\" name=\"root_cause_analysis_hodsr\" id=\"summernote-1\">{{ $data->root_cause_analysis_hodsr }}\r\n                                    </textarea>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div class=\"col-md-12 mb-3\">\r\n                                <div class=\"group-input\">\r\n                                    <label for=\"The most probable root causes identified of the complaint are as below\">The\r\n                                        most probable root causes identified of the complaint are as below</label>\r\n                                    <div><small class=\"text-primary\">Please insert \"NA\" in the data field if it does\r\n                                            not require completion</small></div>\r\n                                    <textarea class=\"summernote\" name=\"probable_root_causes_complaint_hodsr\" id=\"summernote-1\">{{ $data->probable_root_causes_complaint_hodsr }}\r\n                                    </textarea>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div class=\"col-md-12 mb-3\">\r\n                                <div class=\"group-input\">\r\n                                    <label for=\"Impact Assessment\">Impact Assessment :</label>\r\n                                    <div><small class=\"text-primary\">Please insert \"NA\" in the data field if it does\r\n                                            not require completion</small></div>\r\n                                    <textarea class=\"summernote\" name=\"impact_assessment_hodsr\" id=\"summernote-1\">{{ $data->impact_assessment_hodsr }}\r\n                                    </textarea>\r\n                                </div>\r\n                            </div>\r\n\r\n\r\n                            <div class=\"col-md-12 mb-3\">\r\n                                <div class=\"group-input\">\r\n                                    <label for=\"Corrective Action\">Corrective Action :</label>\r\n                                    <div><small class=\"text-primary\">Please insert \"NA\" in the data field if it does\r\n                                            not require completion</small></div>\r\n                                    <textarea class=\"summernote\" name=\"corrective_action_hodsr\" id=\"summernote-1\">{{ $data->corrective_action_hodsr }}\r\n                                    </textarea>\r\n                                </div>\r\n                            </div>\r\n\r\n\r\n                            <div class=\"col-md-12 mb-3\">\r\n                                <div class=\"group-input\">\r\n                                    <label for=\"Preventive Action\">Preventive Action :</label>\r\n                                    <div><small class=\"text-primary\">Please insert \"NA\" in the data field if it does\r\n                                            not require completion</small></div>\r\n                                    <textarea class=\"summernote\" name=\"preventive_action_hodsr\" id=\"summernote-1\">{{ $data->preventive_action_hodsr }}\r\n                                    </textarea>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div class=\"col-md-12 mb-3\">\r\n                                <div class=\"group-input\">\r\n                                    <label for=\"Summary and Conclusion\">Summary and Conclusion</label>\r\n                                    <div><small class=\"text-primary\">Please insert \"NA\" in the data field if it does\r\n                                            not require completion</small></div>\r\n                                    <textarea class=\"summernote\" name=\"summary_and_conclusion_hodsr\" id=\"summernote-1\">{{ $data->summary_and_conclusion_hodsr }}\r\n                                    </textarea>\r\n                                </div>\r\n                            </div>\r\n\r\n\r\n                            <div class=\"col-12\">\r\n                                <div class=\"group-input\">\r\n                                    <label for=\"root_cause\">\r\n                                        Team Members\r\n                                        <button type=\"button\" id=\"team_members\">+</button>\r\n                                        <span class=\"text-primary\" data-bs-toggle=\"modal\"\r\n                                            data-bs-target=\"#document-details-field-instruction-modal\"\r\n                                            style=\"font-size: 0.8rem; font-weight: 400; cursor: pointer;\">\r\n                                            (Launch Instruction)\r\n                                        </span>\r\n                                    </label>\r\n                                    <div class=\"table-responsive\">\r\n                                        <table class=\"table table-bordered\" id=\"team_members_details\" style=\"width: %;\">\r\n                                            <thead>\r\n                                                <tr>\r\n                                                    <th style=\"width: 100px;\">Row #</th>\r\n                                                    <th>Names</th>\r\n                                                    <th>Department</th>\r\n                                                    <th>Sign</th>\r\n                                                    <th>Date</th>\r\n                                                    <th>Action</th>\r\n\r\n\r\n                                                </tr>\r\n                                            </thead>\r\n                                            <tbody>\r\n                                                @php\r\n                                                $teammebindex = 1;\r\n                                            @endphp\r\n                                            \r\n                                            @if (!empty($team_members) && is_array($team_members->data))\r\n                                                @foreach ($team_members->data as $index  => $tem_meb)\r\n                                                <tr>\r\n                                                    <td><input disabled type=\"text\" name=\"serial_number[{{ $index }}]\" value=\"{{ $teammebindex++ }}\"> </td>\r\n                                                    <td><input type=\"text\" name=\"Team_Members[{{ $index }}][names_tm]\" value=\"{{ array_key_exists('names_tm', $tem_meb) ? $tem_meb['names_tm'] : '' }}\"></td>\r\n                                                    <td><input type=\"text\" name=\"Team_Members[{{ $index }}][department_tm]\" value=\"{{ array_key_exists('department_tm', $tem_meb) ? $tem_meb['department_tm'] : '' }}\"></td>\r\n                                                    <td><input type=\"text\" name=\"Team_Members[{{ $index }}][sign_tm]\" value=\"{{ array_key_exists('sign_tm', $tem_meb) ? $tem_meb['sign_tm'] : '' }}\"></td>\r\n                                                    <td>\r\n                                                        <div class=\"new-date-data-field\">\r\n                                                            <div class=\"group-input input-date\">\r\n                                                                <div class=\"calenderauditee\">\r\n                                                                    <input\r\n                                                                    class=\"click_date\"\r\n                                                                    id=\"date_{{ $index }}_date_tm\" \r\n                                                                    type=\"text\" name=\"Team_Members[{{ $index }}][date_tm]\"\r\n                                                                     placeholder=\"DD-MMM-YYYY\"\r\n                                                                      value=\"{{  !empty($tem_meb['date_tm']) ?   \\Carbon\\Carbon::parse($tem_meb['date_tm'])->format('d-M-Y') : '' }}\"\r\n                                                                       />\r\n                                                                    <input type=\"date\" \r\n                                                                    name=\"Team_Members[{{ $index }}][date_tm]\"\r\n                                                                   \r\n                                                                    value=\"{{ !empty($tem_meb['date_tm']) ? \\Carbon\\Carbon::parse($tem_meb['date_tm'])->format('Y-m-d') : '' }}\"\r\n                                                                    id=\"date_{{ $index }}_date_tm\"\r\n                                                                    class=\"hide-input show_date\"\r\n                                                                     style=\"position: absolute; top: 0; left: 0; opacity: 0;\" \r\n                                                                     onchange=\"handleDateInput(this, 'date_{{ $index }}_date_tm')\" />\r\n                                                                </div>\r\n                                                            </div>\r\n                                                        </div>\r\n                                                    </td>\r\n                                                    <td><button type=\"text\" class=\"removeRowBtn\" >Remove</button></td>\r\n                                            \r\n                                                </tr>\r\n                                                @endforeach\r\n                                            @else\r\n                                                <tr>\r\n                                                    <td colspan=\"9\">No product details found</td>\r\n                                                </tr>\r\n                                            @endif\r\n                                            \r\n\r\n                                            </tbody>\r\n                                        </table>\r\n                                   </div>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <script>\r\n                                $(document).ready(function() {\r\n                                    let indexteam = {{ (!empty($team_members) && is_array($team_members->data)) ? count($team_members->data) : 0 }};\r\n                                    $('#team_members').click(function(e) {\r\n                                        e.preventDefault();\r\n                            \r\n                                        function generateTableRow(teamserialNumber) {\r\n                                            var html =\r\n                                                '<tr>' +\r\n                                                '<td><input disabled type=\"text\" name=\"Team_Members[' + teamserialNumber + '][serial]\" value=\"' + (teamserialNumber + 1) + '\"></td>' +\r\n                                                '<td><input type=\"text\" name=\"Team_Members[' + indexteam + '][names_tm]\"></td>' +\r\n                                                '<td><input type=\"text\" name=\"Team_Members[' + indexteam + '][department_tm]\"></td>' +\r\n                                                '<td><input type=\"text\" name=\"Team_Members[' + indexteam + '][sign_tm]\"></td>' +\r\n                                                '<td>  <div class=\"new-date-data-field\"><div class=\"group-input input-date\"><div class=\"calenderauditee\"><input id=\"date_'+ indexteam +'_date_tm\" type=\"text\" name=\"Team_Members[' + indexteam + '][date_tm]\" placeholder=\"DD-MMM-YYYY\" /> <input type=\"date\" name=\"Team_Members[' + indexteam + '][date_tm]\" min=\"{{ \\Carbon\\Carbon::now()->format(\"Y-m-d\") }}\" value=\"\" id=\"date_'+ indexteam +'_date_tm\" class=\"hide-input show_date\" style=\"position: absolute; top: 0; left: 0; opacity: 0;\" oninput=\"handleDateInput(this, \\'date_'+ indexteam +'_date_tm\\')\" /> </div> </div></td>' +\r\n                                                '<td><button type=\"text\" class=\"removeRowBtn\" \">Remove</button></td>' +\r\n                                                '</tr>';\r\n                                            indexteam++;\r\n                                            return html;\r\n                                        }\r\n                            \r\n                                        var tableBody = $('#team_members_details tbody');\r\n                                        var rowCount = tableBody.children('tr').length;\r\n                                        var newRow = generateTableRow(rowCount);\r\n                                        tableBody.append(newRow);\r\n                                    });\r\n                                });\r\n                            </script>\r\n                            \r\n\r\n\r\n\r\n\r\n\r\n                            <div class=\"col-12\">\r\n                                <div class=\"group-input\">\r\n                                    <label for=\"root_cause\">\r\n                                        Report Approval\r\n                                        <button type=\"button\" id=\"report_approval\">+</button>\r\n                                        <span class=\"text-primary\" data-bs-toggle=\"modal\" data-bs-target=\"#document-details-field-instruction-modal\" style=\"font-size: 0.8rem; font-weight: 400; cursor: pointer;\">\r\n                                            (Launch Instruction)\r\n                                        </span>\r\n                                    </label>\r\n                                    <div class=\"table-responsive\">\r\n                                        <table class=\"table table-bordered\" id=\"report_approval_details\" style=\"width: 100%;\">\r\n                                            <thead>\r\n                                                <tr>\r\n                                                    <th style=\"width: 100px;\">Row #</th>\r\n                                                    <th>Names</th>\r\n                                                    <th>Department</th>\r\n                                                    <th>Sign</th>\r\n                                                    <th>Date</th>\r\n                                                    <th>Action</th>\r\n                                                </tr>\r\n                                            </thead>\r\n                                            <tbody>\r\n                                                @php\r\n                                                    $reportindex = 1;\r\n                                                @endphp\r\n                                                @if (!empty($report_approval) && is_array($report_approval->data))\r\n                                                    @foreach ($report_approval->data as $index => $rep_ap)\r\n                                                        <tr>\r\n                                                            <td><input disabled type=\"text\" name=\"Report_Approval[{{ $index }}][serial]\" value=\"{{ $reportindex++ }}\"></td>\r\n                                                            <td><input type=\"text\" name=\"Report_Approval[{{ $index }}][names_rrv]\" value=\"{{ $rep_ap['names_rrv'] }}\"></td>\r\n                                                            <td><input type=\"text\" name=\"Report_Approval[{{ $index }}][department_rrv]\" value=\"{{ $rep_ap['department_rrv'] }}\"></td>\r\n                                                            <td><input type=\"text\" name=\"Report_Approval[{{ $index }}][sign_rrv]\" value=\"{{ $rep_ap['sign_rrv'] }}\"></td>\r\n                                                            <td>\r\n                                                                <div class=\"new-date-data-field\">\r\n                                                                    <div class=\"group-input input-date\">\r\n                                                                        <div class=\"calenderauditee\">\r\n                                                                            <input\r\n                                                                                class=\"click_date\"\r\n                                                                                id=\"date_{{ $index }}_date_rrv\"\r\n                                                                                type=\"text\"\r\n                                                                                name=\"Report_Approval[{{ $index }}][date_rrv]\"\r\n                                                                                placeholder=\"DD-MMM-YYYY\"\r\n                                                                                value=\"{{ !empty($rep_ap['date_rrv']) ? \\Carbon\\Carbon::parse($rep_ap['date_rrv'])->format('d-M-Y') : '' }}\"\r\n                                                                            />\r\n                                                                            <input\r\n                                                                                type=\"date\"\r\n                                                                                name=\"Report_Approval[{{ $index }}][date_rrv]\"\r\n                                                                                value=\"{{ !empty($rep_ap['date_rrv']) ? \\Carbon\\Carbon::parse($rep_ap['date_rrv'])->format('Y-m-d') : '' }}\"\r\n                                                                                id=\"date_{{ $index }}_date_rrv\"\r\n                                                                                class=\"hide-input show_date\"\r\n                                                                                style=\"position: absolute; top: 0; left: 0; opacity: 0;\"\r\n                                                                                onchange=\"handleDateInput(this, 'date_{{ $index }}_date_rrv')\"\r\n                                                                            />\r\n                                                                        </div>\r\n                                                                    </div>\r\n                                                                </div>\r\n                                                            </td>\r\n                                                            <td><button type=\"button\" class=\"removeRowBtn\">Remove</button></td>\r\n                                                        </tr>\r\n                                                    @endforeach\r\n                                                @endif\r\n                                            </tbody>\r\n                                        </table>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            \r\n                            \r\n\r\n                            <script>\r\n                                $(document).ready(function() {\r\n                                    let indexReaprovel = {{ ($report_approval && is_array($report_approval->data)) ? count($report_approval->data) : 0 }};\r\n                                    \r\n                                    $('#report_approval').click(function(e) {\r\n                                        e.preventDefault();\r\n                            \r\n                                        function generateTableRow(serialNumber) {\r\n                                            var html =\r\n                                                '<tr>' +\r\n                                                '<td><input disabled type=\"text\" name=\"Report_Approval[' + serialNumber + '][serial]\" value=\"' + (serialNumber + 1) + '\"></td>' +\r\n                                                '<td><input type=\"text\" name=\"Report_Approval[' + serialNumber + '][names_rrv]\"></td>' +\r\n                                                '<td><input type=\"text\" name=\"Report_Approval[' + serialNumber + '][department_rrv]\"></td>' +\r\n                                                '<td><input type=\"text\" name=\"Report_Approval[' + serialNumber + '][sign_rrv]\"></td>' +\r\n                                                '<td><div class=\"new-date-data-field\"><div class=\"group-input input-date\"><div class=\"calenderauditee\"><input id=\"date_'+ serialNumber +'_date_rrv\" type=\"text\" name=\"Report_Approval[' + serialNumber + '][date_rrv]\" placeholder=\"DD-MMM-YYYY\" value=\"\" /> <input type=\"date\" name=\"Report_Approval[' + serialNumber + '][date_rrv]\" value=\"\" id=\"date_'+ serialNumber +'_date_rrv\" class=\"hide-input show_date\" style=\"position: absolute; top: 0; left: 0; opacity: 0;\" oninput=\"handleDateInput(this, \\'date_'+ serialNumber +'_date_rrv\\')\" /> </div></div></div></td>' +\r\n                                                '<td><button type=\"button\" class=\"removeRowBtn\">Remove</button></td>' +\r\n                                                '</tr>';\r\n                                            indexReaprovel++;\r\n                                            return html;\r\n                                        }\r\n                            \r\n                                        var tableBody = $('#report_approval_details tbody');\r\n                                        var rowCount = tableBody.children('tr').length;\r\n                                        var newRow = generateTableRow(rowCount);\r\n                                        tableBody.append(newRow);\r\n                                    });\r\n                            \r\n                                    $(document).on('click', '.removeRowBtn', function() {\r\n                                        $(this).closest('tr').remove();\r\n                                    });\r\n                                });\r\n                            \r\n                                function handleDateInput(dateInput, textInputId) {\r\n                                    const textInput = document.getElementById(textInputId);\r\n                                    if (dateInput.value) {\r\n                                        const date = new Date(dateInput.value);\r\n                                        const formattedDate = date.toLocaleDateString('en-GB', {\r\n                                            day: '2-digit',\r\n                                            month: 'short',\r\n                                            year: 'numeric'\r\n                                        }).replace(/ /g, '-');\r\n                                        textInput.value = formattedDate;\r\n                                    } else {\r\n                                        textInput.value = '';\r\n                                    }\r\n                                }\r\n                            </script>\r\n                            \r\n\r\n\r\n\r\n                           \r\n                <div class=\"col-12\">\r\n                    <div class=\"group-input\">\r\n                        <label for=\"Inv Attachments\">Initial Attachment</label>\r\n                        <div>\r\n                            <small class=\"text-primary\">\r\n                                Please Attach all relevant or supporting documents\r\n                            </small>\r\n                        </div>\r\n                        <div class=\"file-attachment-field\">\r\n                            <div class=\"file-attachment-list\" id=\"initial_attachment_hodsr\">\r\n\r\n                                @if ($data->initial_attachment_hodsr)\r\n                                    @foreach (json_decode($data->initial_attachment_hodsr) as $file)\r\n                                        <h6 type=\"button\" class=\"file-container text-dark\"\r\n                                            style=\"background-color: rgb(243, 242, 240);\">\r\n                                            <b>{{ $file }}</b>\r\n                                            <a href=\"{{ asset('upload/' . $file) }}\" target=\"_blank\"><i\r\n                                                    class=\"fa fa-eye text-primary\"\r\n                                                    style=\"font-size:20px; margin-right:-10px;\"></i></a>\r\n                                            <a type=\"button\" class=\"remove-file\"\r\n                                                data-file-name=\"{{ $file }}\"><i\r\n                                                    class=\"fa-solid fa-circle-xmark\"\r\n                                                    style=\"color:red; font-size:20px;\"></i></a>\r\n                                        </h6>\r\n                                    @endforeach\r\n                                @endif\r\n                            </div>\r\n                            <div class=\"add-btn\">\r\n                                <div>Add</div>\r\n                                <input type=\"file\" id=\"initial_attachment_hodsr\" name=\"initial_attachment_hodsr[]\"\r\n                                    oninput=\"addMultipleFiles(this,'initial_attachment_hodsr')\" multiple>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                            <div class=\"col-md-12 mb-3\">\r\n                                <div class=\"group-input\">\r\n                                    <label for=\"Comments\">Comments(if Any)</label>\r\n                                    <div><small class=\"text-primary\">Please insert \"NA\" in the data field if it does\r\n                                            not require completion</small></div>\r\n                                    <textarea class=\"summernote\" name=\"comments_if_any_hodsr\" id=\"summernote-1\">{{ $data->comments_if_any_hodsr }}\r\n                                    </textarea>\r\n                                </div>\r\n                            </div>\r\n\r\n                            {{-- <div class=\"col-12\">\r\n                                    <div class=\"group-input\">\r\n                                        <label for=\"Support_doc\">Supporting Documents</label>\r\n                                        <div class=\"file-attachment-field\">\r\n                                            <div class=\"file-attachment-list\" id=\"Support_doc\"></div>\r\n                                            <div class=\"add-btn\">\r\n                                                <div>Add</div>\r\n                                                <input type=\"file\" id=\"myfile\" name=\"Support_doc[]\"\r\n                                                    oninput=\"addMultipleFiles(this, 'Support_doc')\" multiple>\r\n                                            </div>\r\n                                        </div>\r\n\r\n                                    </div>\r\n                                </div> --}}\r\n                        </div>\r\n                        <div class=\"button-block\">\r\n                            <button type=\"submit\" class=\"saveButton\" id=\"saveButton\"\r\n                            @if ($data->stage == 8) onclick=\"showAlert(event)\" @endif>Save</button>\r\n\r\n                        <div id=\"alert-message\" style=\"display:none;\">\r\n                            Your stage is Closed - Done You Cannot Edit or Save.\r\n                        </div>\r\n                           \r\n\r\n                        <script>\r\n                            function showAlert(event) {\r\n                                event.preventDefault(); // Prevent form submission\r\n                                var alertMessage = document.getElementById('alert-message').innerText;\r\n                                alert(alertMessage);\r\n                            }\r\n                        \r\n                            document.addEventListener('DOMContentLoaded', function () {\r\n                                var stage = {{ $data->stage }};\r\n                                \r\n                              \r\n                            });\r\n                        </script>\r\n                            <button type=\"button\" class=\"backButton\" onclick=\"previousStep()\">Back</button>\r\n                            <button type=\"button\" class=\"nextButton\" onclick=\"nextStep()\">Next</button>\r\n\r\n                            <button type=\"button\"> <a class=\"text-white\" href=\"{{ url('rcms/qms-dashboard') }}\">\r\n                                    Exit </a> </button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div id=\"CCForm3\" class=\"inner-block cctabcontent\">\r\n                <div class=\"inner-block-content\">\r\n                    <div class=\"row\">\r\n\r\n\r\n                        <div class=\"sub-head\">Acknowledgement</div>\r\n\r\n\r\n\r\n                        <div class=\"col-md-12 mb-3\">\r\n                            <div class=\"group-input\">\r\n                                <label for=\"Manufacturer name & Address\">Manufacturer name & Address</label>\r\n                                <div><small class=\"text-primary\">Please insert \"NA\" in the data field if it does not\r\n                                        require completion</small></div>\r\n                                <textarea class=\"summernote\" name=\"manufacturer_name_address_ca\" id=\"summernote-1\">{{ $data->manufacturer_name_address_ca }}\r\n                                    </textarea>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div class=\"col-12\">\r\n                            <div class=\"group-input\">\r\n                                <label for=\"root_cause\">\r\n                                    Product/Material Detail\r\n                                    <button type=\"button\" id=\"promate_add\">+</button>\r\n                                    <span class=\"text-primary\" data-bs-toggle=\"modal\" data-bs-target=\"#document-details-field-instruction-modal\" style=\"font-size: 0.8rem; font-weight: 400; cursor: pointer;\">\r\n                                        (Launch Instruction)\r\n                                    </span>\r\n                                </label>\r\n                                <div class=\"table-responsive\">\r\n                                    <table class=\"table table-bordered\" id=\"prod_mate_details\" style=\"width: 100%;\">\r\n                                        <thead>\r\n                                            <tr>\r\n                                                <th style=\"width: 100px;\">Row #</th>\r\n                                                <th>Product Name</th>\r\n                                                <th>Batch No.</th>\r\n                                                <th>Mfg. Date</th>\r\n                                                <th>Exp. Date</th>\r\n                                                <th>Batch Size</th>\r\n                                                <th>Pack Profile</th>\r\n                                                <th>Released Quantity</th>\r\n                                                <th>Remarks</th>\r\n                                                <th>Action</th>\r\n                                            </tr>\r\n                                        </thead>\r\n                                        <tbody>\r\n                                            @php\r\n                                                $productmateIndex = 0;\r\n                                            @endphp\r\n                                            @if (!empty($product_materialDetails) && is_array($product_materialDetails->data))\r\n                                                @foreach ($product_materialDetails->data as $index => $Prodmateriyal)\r\n                                                    <tr>\r\n                                                        <td>{{  ++$productmateIndex }}</td>\r\n                                                        <td><input type=\"text\" name=\"Product_MaterialDetails[{{ $index }}][product_name_ca]\" value=\"{{ array_key_exists('product_name_ca', $Prodmateriyal) ? $Prodmateriyal['product_name_ca'] : '' }}\"></td>\r\n                                                        <td><input type=\"text\" name=\"Product_MaterialDetails[{{ $index }}][batch_no_pmd_ca]\" value=\"{{ array_key_exists('batch_no_pmd_ca', $Prodmateriyal) ? $Prodmateriyal['batch_no_pmd_ca'] : '' }}\"></td>\r\n                                                        <td>\r\n                                                            <div class=\"new-date-data-field\">\r\n                                                                <div class=\"group-input input-date\">\r\n                                                                    <div class=\"calenderauditee\">\r\n                                                                        <input\r\n                                                                            class=\"click_date\"\r\n                                                                            id=\"date_{{ $index }}_mfg_date_pmd_ca\" type=\"text\"\r\n                                                                            name=\"Product_MaterialDetails[{{ $index }}][mfg_date_pmd_ca]\"\r\n                                                                            placeholder=\"DD-MMM-YYYY\"\r\n                                                                            value=\"{{ !empty($Prodmateriyal['mfg_date_pmd_ca']) ? \\Carbon\\Carbon::parse($Prodmateriyal['mfg_date_pmd_ca'])->format('d-M-Y') : '' }}\"\r\n                                                                        />\r\n                                                                        <input type=\"date\"\r\n                                                                            name=\"Product_MaterialDetails[{{ $index }}][mfg_date_pmd_ca]\"\r\n                                                                            value=\"{{ !empty($Prodmateriyal['mfg_date_pmd_ca']) ? \\Carbon\\Carbon::parse($Prodmateriyal['mfg_date_pmd_ca'])->format('Y-m-d') : '' }}\"\r\n                                                                            id=\"date_{{ $index }}_mfg_date_pmd_ca\"\r\n                                                                            class=\"hide-input show_date\"\r\n                                                                            style=\"position: absolute; top: 0; left: 0; opacity: 0;\" \r\n                                                                            onchange=\"handleDateInput(this, 'date_{{ $index }}_mfg_date_pmd_ca')\" />\r\n                                                                    </div>\r\n                                                                </div>\r\n                                                            </div>\r\n                                                        </td>\r\n                                                        <td>\r\n                                                            <div class=\"new-date-data-field\">\r\n                                                                <div class=\"group-input input-date\">\r\n                                                                    <div class=\"calenderauditee\">\r\n                                                                        <input\r\n                                                                            class=\"click_date\"\r\n                                                                            id=\"date_{{ $index }}_expiry_date_pmd_ca\" type=\"text\"\r\n                                                                            name=\"Product_MaterialDetails[{{ $index }}][expiry_date_pmd_ca]\"\r\n                                                                            placeholder=\"DD-MMM-YYYY\" \r\n                                                                            value=\"{{ !empty($Prodmateriyal['expiry_date_pmd_ca']) ? \\Carbon\\Carbon::parse($Prodmateriyal['expiry_date_pmd_ca'])->format('d-M-Y') : '' }}\"\r\n                                                                        />\r\n                                                                        <input type=\"date\"\r\n                                                                            name=\"Product_MaterialDetails[{{ $index }}][expiry_date_pmd_ca]\"\r\n                                                                            value=\"{{ !empty($Prodmateriyal['expiry_date_pmd_ca']) ? \\Carbon\\Carbon::parse($Prodmateriyal['expiry_date_pmd_ca'])->format('Y-m-d') : '' }}\"\r\n                                                                            id=\"date_{{ $index }}_expiry_date_pmd_ca\"\r\n                                                                            class=\"hide-input show_date\" \r\n                                                                            style=\"position: absolute; top: 0; left: 0; opacity: 0;\" \r\n                                                                            onchange=\"handleDateInput(this, 'date_{{ $index }}_expiry_date_pmd_ca')\" />\r\n                                                                    </div>\r\n                                                                </div>\r\n                                                            </div>\r\n                                                        </td>\r\n                                                        <td><input type=\"text\" name=\"Product_MaterialDetails[{{ $index }}][batch_size_pmd_ca]\" value=\"{{ array_key_exists('batch_size_pmd_ca', $Prodmateriyal) ? $Prodmateriyal['batch_size_pmd_ca'] : '' }}\"></td>\r\n                                                        <td><input type=\"text\" name=\"Product_MaterialDetails[{{ $index }}][pack_profile_pmd_ca]\" value=\"{{ array_key_exists('pack_profile_pmd_ca', $Prodmateriyal) ? $Prodmateriyal['pack_profile_pmd_ca'] : '' }}\"></td>\r\n                                                        <td><input type=\"text\" name=\"Product_MaterialDetails[{{ $index }}][released_quantity_pmd_ca]\" value=\"{{ array_key_exists('released_quantity_pmd_ca', $Prodmateriyal) ? $Prodmateriyal['released_quantity_pmd_ca'] : '' }}\"></td>\r\n                                                        <td><input type=\"text\" name=\"Product_MaterialDetails[{{ $index }}][remarks_ca]\" value=\"{{ array_key_exists('remarks_ca', $Prodmateriyal) ? $Prodmateriyal['remarks_ca'] : '' }}\"></td>\r\n                                                        <td><button type=\"text\" class=\"removeRowBtn\">Remove</button></td>\r\n                                                    </tr>\r\n                                                @endforeach\r\n                                            @else\r\n                                                <tr>\r\n                                                    <td colspan=\"10\">No found</td>\r\n                                                </tr>\r\n                                            @endif\r\n                                        </tbody>\r\n                                    </table>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        \r\n                        <script>\r\n                            $(document).ready(function() {\r\n                                let indexMaetDetails = {{ ($product_materialDetails && is_array($product_materialDetails->data)) ? count($product_materialDetails->data) : 0 }};\r\n                                $('#promate_add').click(function(e) {\r\n                                    e.preventDefault();\r\n                        \r\n                                    function generateTableRow(productserialno) {\r\n                                        var html =\r\n                                            '<tr>' +\r\n                                                '<td>' + (productserialno + 1) + '</td>' +\r\n                                                '<td><input type=\"text\" name=\"Product_MaterialDetails[' + productserialno + '][product_name_ca]\"></td>' +\r\n                                                '<td><input type=\"text\" name=\"Product_MaterialDetails[' + productserialno + '][batch_no_pmd_ca]\"></td>' +\r\n                                                '<td> <div class=\"new-date-data-field\"><div class=\"group-input input-date\"><div class=\"calenderauditee\"><input id=\"date_'+ productserialno +'_mfg_date_pmd_ca\" type=\"text\" name=\"Product_MaterialDetails[' + productserialno + '][mfg_date_pmd_ca]\" placeholder=\"DD-MMM-YYYY\" /> <input type=\"date\" name=\"Product_MaterialDetails[' + productserialno + '][mfg_date_pmd_ca]\" min=\"{{ \\Carbon\\Carbon::now()->format(\"Y-m-d\") }}\" value=\"{{ \\Carbon\\Carbon::now()->format(\"Y-m-d\") }}\" id=\"date_'+ productserialno +'_mfg_date_pmd_ca\" class=\"hide-input show_date\" style=\"position: absolute; top: 0; left: 0; opacity: 0;\" oninput=\"handleDateInput(this, \\'date_'+ productserialno +'_mfg_date_pmd_ca\\')\" /> </div></div></div> </td>' +\r\n                                                '<td> <div class=\"new-date-data-field\"><div class=\"group-input input-date\"><div class=\"calenderauditee\"><input id=\"date_'+ productserialno +'_expiry_date_pmd_ca\" type=\"text\" name=\"Product_MaterialDetails[' + productserialno + '][expiry_date_pmd_ca]\" placeholder=\"DD-MMM-YYYY\" /> <input type=\"date\" name=\"Product_MaterialDetails[' + productserialno + '][expiry_date_pmd_ca]\" min=\"{{ \\Carbon\\Carbon::now()->format(\"Y-m-d\") }}\" value=\"{{ \\Carbon\\Carbon::now()->format(\"Y-m-d\") }}\" id=\"date_'+ productserialno +'_expiry_date_pmd_ca\" class=\"hide-input show_date\" style=\"position: absolute; top: 0; left: 0; opacity: 0;\" oninput=\"handleDateInput(this, \\'date_'+ productserialno +'_expiry_date_pmd_ca\\')\" /> </div></div></div> </td>' +\r\n                                                '<td><input type=\"text\" name=\"Product_MaterialDetails[' + productserialno + '][batch_size_pmd_ca]\"></td>' +\r\n                                                '<td><input type=\"text\" name=\"Product_MaterialDetails[' + productserialno + '][pack_profile_pmd_ca]\"></td>' +\r\n                                                '<td><input type=\"text\" name=\"Product_MaterialDetails[' + productserialno + '][released_quantity_pmd_ca]\"></td>' +\r\n                                                '<td><input type=\"text\" name=\"Product_MaterialDetails[' + productserialno + '][remarks_ca]\"></td>' +\r\n                                                '<td><button type=\"text\" class=\"removeRowBtn\">Remove</button></td>' +\r\n                                            '</tr>';\r\n                                        return html;\r\n                                    }\r\n                        \r\n                                    var tableBody = $('#prod_mate_details tbody');\r\n                                    var rowCount = tableBody.children('tr').length;\r\n                                    var newRow = generateTableRow(rowCount);\r\n                                    tableBody.append(newRow);\r\n                                    indexMaetDetails++;\r\n                                });\r\n                            });\r\n                        </script>\r\n                        \r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n                        <div class=\"col-lg-12\">\r\n                            <div class=\"group-input\">\r\n                                <label for=\"Complaint Sample Required\">Complaint Sample Required</label>\r\n                                <select name=\"complaint_sample_required_ca\">\r\n                                    <option value=\"\">-- select --</option>\r\n                                    <option value=\"yes\" {{ isset($data) && $data->complaint_sample_required_ca == 'yes' ? 'selected' : '' }}>Yes</option>\r\n                                    <option value=\"no\" {{ isset($data) && $data->complaint_sample_required_ca == 'no' ? 'selected' : '' }}>No</option>\r\n                                    <option value=\"na\" {{ isset($data) && $data->complaint_sample_required_ca == 'na' ? 'selected' : '' }}>NA</option>\r\n                                </select>\r\n                            </div>\r\n                        </div>\r\n\r\n\r\n                        <div class=\"col-lg-12\">\r\n                            <div class=\"group-input\">\r\n                                <label for=\"Complaint Sample Status\">Complaint Sample Status</label>\r\n                                <input type=\"text\" name=\"complaint_sample_status_ca\" id=\"date_of_initiation\"\r\n                                    value=\"{{ $data->complaint_sample_status_ca }}\">\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div class=\"col-md-12 mb-3\">\r\n                            <div class=\"group-input\">\r\n                                <label for=\"Brief Description of complaint\">Brief Description of complaint:</label>\r\n                                <div><small class=\"text-primary\">Please insert \"NA\" in the data field if it does\r\n                                        not require completion</small></div>\r\n                                <textarea class=\"summernote\" name=\"brief_description_of_complaint_ca\" id=\"summernote-1\">{{ $data->brief_description_of_complaint_ca }}\r\n                                </textarea>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"col-md-12 mb-3\">\r\n                            <div class=\"group-input\">\r\n                                <label for=\"Batch Record review observation\">Batch Record review\r\n                                    observation</label>\r\n                                <div><small class=\"text-primary\">Please insert \"NA\" in the data field if it does\r\n                                        not require completion</small></div>\r\n                                <textarea class=\"summernote\" name=\"batch_record_review_observation_ca\" id=\"summernote-1\">{{ $data->batch_record_review_observation_ca }}\r\n                                </textarea>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"col-md-12 mb-3\">\r\n                            <div class=\"group-input\">\r\n                                <label for=\"Analytical Data review observation\">Analytical Data review\r\n                                    observation</label>\r\n                                <div><small class=\"text-primary\">Please insert \"NA\" in the data field if it does\r\n                                        not require completion</small></div>\r\n                                <textarea class=\"summernote\" name=\"analytical_data_review_observation_ca\" id=\"summernote-1\">{{ $data->analytical_data_review_observation_ca }}\r\n                                </textarea>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"col-md-12 mb-3\">\r\n                            <div class=\"group-input\">\r\n                                <label for=\"Retention sample review observation\">Retention sample review\r\n                                    observation</label>\r\n                                <div><small class=\"text-primary\">Please insert \"NA\" in the data field if it does\r\n                                        not require completion</small></div>\r\n                                <textarea class=\"summernote\" name=\"retention_sample_review_observation_ca\" id=\"summernote-1\">{{ $data->retention_sample_review_observation_ca }}\r\n                                </textarea>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"col-md-12 mb-3\">\r\n                            <div class=\"group-input\">\r\n                                <label for=\"Stablity study data review\">Stablity study data review</label>\r\n                                <div><small class=\"text-primary\">Please insert \"NA\" in the data field if it does\r\n                                        not require completion</small></div>\r\n                                <textarea class=\"summernote\" name=\"stability_study_data_review_ca\" id=\"summernote-1\">{{ $data->stability_study_data_review_ca }}\r\n                                </textarea>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"col-md-12 mb-3\">\r\n                            <div class=\"group-input\">\r\n                                <label for=\"QMS Events(if any) review Observation\">QMS Events(if any) review\r\n                                    Observation</label>\r\n                                <div><small class=\"text-primary\">Please insert \"NA\" in the data field if it does\r\n                                        not require completion</small></div>\r\n                                <textarea class=\"summernote\" name=\"qms_events_ifany_review_observation_ca\" id=\"summernote-1\">{{ $data->qms_events_ifany_review_observation_ca }}\r\n                                </textarea>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"col-md-12 mb-3\">\r\n                            <div class=\"group-input\">\r\n                                <label for=\"Repeated complaints/queries for product\">Repeated complaints/queries\r\n                                    for product:</label>\r\n                                <div><small class=\"text-primary\">Please insert \"NA\" in the data field if it does\r\n                                        not require completion</small></div>\r\n                                <textarea class=\"summernote\" name=\"repeated_complaints_queries_for_product_ca\" id=\"summernote-1\">{{ $data->repeated_complaints_queries_for_product_ca }}\r\n                                </textarea>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"col-md-12 mb-3\">\r\n                            <div class=\"group-input\">\r\n                                <label for=\"Interpretation on compalint sample\">Interpretation on compalint\r\n                                    sample(if recieved)</label>\r\n                                <div><small class=\"text-primary\">Please insert \"NA\" in the data field if it does\r\n                                        not require completion</small></div>\r\n                                <textarea class=\"summernote\" name=\"interpretation_on_complaint_sample_ifrecieved_ca\" id=\"summernote-1\">{{ $data->interpretation_on_complaint_sample_ifrecieved_ca }}\r\n                                </textarea>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"col-md-12 mb-3\">\r\n                            <div class=\"group-input\">\r\n                                <label for=\"Comments\">Comments(if Any)</label>\r\n                                <div><small class=\"text-primary\">Please insert \"NA\" in the data field if it does\r\n                                        not require completion</small></div>\r\n                                <textarea class=\"summernote\" name=\"comments_ifany_ca\" id=\"summernote-1\">{{ $data->comments_ifany_ca }}\r\n                                </textarea>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"sub-head\">\r\n                            Proposal to accomplish investigation:\r\n                        </div>\r\n                        <div class=\"col-12\">\r\n                            <div class=\"group-input\">\r\n                                <div class=\"why-why-chart\">\r\n                                    <table class=\"table table-bordered\">\r\n                                        <thead>\r\n                                            <tr>\r\n                                                <th style=\"width: 5%;\">Sr. No.</th>\r\n                                                <th style=\"width: 40%;\">Requirements</th>\r\n                                                <th style=\"width: 20%;\">Expected date of investigation completion</th>\r\n                                                <th>Remarks</th>\r\n                                            </tr>\r\n                                        </thead>\r\n                                        <tbody>\r\n                                            <tr>\r\n                                                <td class=\"flex text-center\">1</td>\r\n                                                <td>Complaint sample Required</td>\r\n                                                <td>\r\n                                                    <div style=\"margin: auto; display: flex; justify-content: center;\">\r\n                                                        <textarea name=\"csr1\" style=\"border-radius: 7px; border: 1.5px solid black;\">{{ $proposalData['Complaint sample Required']['csr1'] ?? '' }}</textarea>\r\n                                                    </div>\r\n                                                </td>\r\n                                                <td style=\"vertical-align: middle;\">\r\n                                                    <div style=\"margin: auto; display: flex; justify-content: center;\">\r\n                                                        <textarea name=\"csr2\" style=\"border-radius: 7px; border: 1.5px solid black;\">{{ $proposalData['Complaint sample Required']['csr2'] ?? '' }}</textarea>\r\n                                                    </div>\r\n                                                </td>\r\n                                            </tr>\r\n                                            <tr>\r\n                                                <td class=\"flex text-center\">2</td>\r\n                                                <td>Additional info. From Complainant</td>\r\n                                                <td>\r\n                                                    <div style=\"margin: auto; display: flex; justify-content: center;\">\r\n                                                        <textarea name=\"afc1\" style=\"border-radius: 7px; border: 1.5px solid black;\">{{ $proposalData['Additional info. From Complainant']['afc1'] ?? '' }}</textarea>\r\n                                                    </div>\r\n                                                </td>\r\n                                                <td style=\"vertical-align: middle;\">\r\n                                                    <div style=\"margin: auto; display: flex; justify-content: center;\">\r\n                                                        <textarea name=\"afc2\" style=\"border-radius: 7px; border: 1.5px solid black;\">{{ $proposalData['Additional info. From Complainant']['afc2'] ?? '' }}</textarea>\r\n                                                    </div>\r\n                                                </td>\r\n                                            </tr>\r\n                                            <tr>\r\n                                                <td class=\"flex text-center\">3</td>\r\n                                                <td>Analysis of complaint Sample</td>\r\n                                                <td>\r\n                                                    <div style=\"margin: auto; display: flex; justify-content: center;\">\r\n                                                        <textarea name=\"acs1\" style=\"border-radius: 7px; border: 1.5px solid black;\">{{ $proposalData['Analysis of complaint Sample']['acs1'] ?? '' }}</textarea>\r\n                                                    </div>\r\n                                                </td>\r\n                                                <td style=\"vertical-align: middle;\">\r\n                                                    <div style=\"margin: auto; display: flex; justify-content: center;\">\r\n                                                        <textarea name=\"acs2\" style=\"border-radius: 7px; border: 1.5px solid black;\">{{ $proposalData['Analysis of complaint Sample']['acs2'] ?? '' }}</textarea>\r\n                                                    </div>\r\n                                                </td>\r\n                                            </tr>\r\n                                            <tr>\r\n                                                <td class=\"flex text-center\">4</td>\r\n                                                <td>QRM Approach</td>\r\n                                                <td>\r\n                                                    <div style=\"margin: auto; display: flex; justify-content: center;\">\r\n                                                        <textarea name=\"qrm1\" style=\"border-radius: 7px; border: 1.5px solid black;\">{{ $proposalData['QRM Approach']['qrm1'] ?? '' }}</textarea>\r\n                                                    </div>\r\n                                                </td>\r\n                                                <td style=\"vertical-align: middle;\">\r\n                                                    <div style=\"margin: auto; display: flex; justify-content: center;\">\r\n                                                        <textarea name=\"qrm2\" style=\"border-radius: 7px; border: 1.5px solid black;\">{{ $proposalData['QRM Approach']['qrm2'] ?? '' }}</textarea>\r\n                                                    </div>\r\n                                                </td>\r\n                                            </tr>\r\n                                            <tr>\r\n                                                <td class=\"flex text-center\">5</td>\r\n                                                <td>Others</td>\r\n                                                <td>\r\n                                                    <div style=\"margin: auto; display: flex; justify-content: center;\">\r\n                                                        <textarea name=\"oth1\" style=\"border-radius: 7px; border: 1.5px solid black;\">{{ $proposalData['Others']['oth1'] ?? '' }}</textarea>\r\n                                                    </div>\r\n                                                </td>\r\n                                                <td style=\"vertical-align: middle;\">\r\n                                                    <div style=\"margin: auto; display: flex; justify-content: center;\">\r\n                                                        <textarea name=\"oth2\" style=\"border-radius: 7px; border: 1.5px solid black;\">{{ $proposalData['Others']['oth2'] ?? '' }}</textarea>\r\n                                                    </div>\r\n                                                </td>\r\n                                            </tr>\r\n                                        </tbody>\r\n                                    </table>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n\r\n                    <div class=\"col-12\">\r\n                        <div class=\"group-input\">\r\n                            <label for=\"Inv Attachments\">Initial Attachment</label>\r\n                            <div>\r\n                                <small class=\"text-primary\">\r\n                                    Please Attach all relevant or supporting documents\r\n                                </small>\r\n                            </div>\r\n                            <div class=\"file-attachment-field\">\r\n                                <div class=\"file-attachment-list\" id=\"initial_attachment_ca\">\r\n\r\n                                    @if ($data->initial_attachment_ca)\r\n                                        @foreach (json_decode($data->initial_attachment_ca) as $file)\r\n                                            <h6 type=\"button\" class=\"file-container text-dark\"\r\n                                                style=\"background-color: rgb(243, 242, 240);\">\r\n                                                <b>{{ $file }}</b>\r\n                                                <a href=\"{{ asset('upload/' . $file) }}\" target=\"_blank\"><i\r\n                                                        class=\"fa fa-eye text-primary\"\r\n                                                        style=\"font-size:20px; margin-right:-10px;\"></i></a>\r\n                                                <a type=\"button\" class=\"remove-file\"\r\n                                                    data-file-name=\"{{ $file }}\"><i\r\n                                                        class=\"fa-solid fa-circle-xmark\"\r\n                                                        style=\"color:red; font-size:20px;\"></i></a>\r\n                                            </h6>\r\n                                        @endforeach\r\n                                    @endif\r\n                                </div>\r\n                                <div class=\"add-btn\">\r\n                                    <div>Add</div>\r\n                                    <input type=\"file\" id=\"initial_attachment_ca\" name=\"initial_attachment_ca[]\"\r\n                                        oninput=\"addMultipleFiles(this,'initial_attachment_ca')\" multiple>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                </div>\r\n                <div class=\"button-block\">\r\n                    <button type=\"submit\" class=\"saveButton\" id=\"saveButton\"\r\n                            @if ($data->stage == 8) onclick=\"showAlert(event)\" @endif>Save</button>\r\n\r\n                        <div id=\"alert-message\" style=\"display:none;\">\r\n                            Your stage is Closed - Done You Cannot Edit or Save.\r\n                        </div>\r\n                           \r\n\r\n                        <script>\r\n                            function showAlert(event) {\r\n                                event.preventDefault(); // Prevent form submission\r\n                                var alertMessage = document.getElementById('alert-message').innerText;\r\n                                alert(alertMessage);\r\n                            }\r\n                        \r\n                            document.addEventListener('DOMContentLoaded', function () {\r\n                                var stage = {{ $data->stage }};\r\n                                \r\n                              \r\n                            });\r\n                        </script>\r\n                    <button type=\"button\" class=\"backButton\" onclick=\"previousStep()\">Back</button>\r\n                    <button type=\"button\" class=\"nextButton\" onclick=\"nextStep()\">Next</button>\r\n\r\n                    <button type=\"button\"> <a class=\"text-white\" href=\"{{ url('rcms/qms-dashboard') }}\">\r\n                            Exit </a> </button>\r\n                </div>\r\n            </div>\r\n    </div>\r\n\r\n\r\n\r\n\r\n\r\n    <div id=\"CCForm4\" class=\"inner-block cctabcontent\">\r\n        <div class=\"inner-block-content\">\r\n            <div class=\"sub-head\">\r\n                Closure\r\n            </div>\r\n            <div class=\"row\">\r\n                <div class=\"col-md-12 mb-3\">\r\n                    <div class=\"group-input\">\r\n                        <label for=\"Closure Comment\">Closure Comment</label>\r\n                        <div><small class=\"text-primary\">Please insert \"NA\" in the data field if it does not\r\n                                require completion</small></div>\r\n                        <textarea class=\"summernote\" name=\"closure_comment_c\" id=\"summernote-1\">{{ $data->closure_comment_c }}\r\n                                    </textarea>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class=\"col-12\">\r\n                    <div class=\"group-input\">\r\n                        <label for=\"Inv Attachments\">Initial Attachment</label>\r\n                        <div>\r\n                            <small class=\"text-primary\">\r\n                                Please Attach all relevant or supporting documents\r\n                            </small>\r\n                        </div>\r\n                        <div class=\"file-attachment-field\">\r\n                            <div class=\"file-attachment-list\" id=\"initial_attachment_c\">\r\n\r\n                                @if ($data->initial_attachment_c)\r\n                                    @foreach (json_decode($data->initial_attachment_c) as $file)\r\n                                        <h6 type=\"button\" class=\"file-container text-dark\"\r\n                                            style=\"background-color: rgb(243, 242, 240);\">\r\n                                            <b>{{ $file }}</b>\r\n                                            <a href=\"{{ asset('upload/' . $file) }}\" target=\"_blank\"><i\r\n                                                    class=\"fa fa-eye text-primary\"\r\n                                                    style=\"font-size:20px; margin-right:-10px;\"></i></a>\r\n                                            <a type=\"button\" class=\"remove-file\"\r\n                                                data-file-name=\"{{ $file }}\"><i\r\n                                                    class=\"fa-solid fa-circle-xmark\"\r\n                                                    style=\"color:red; font-size:20px;\"></i></a>\r\n                                        </h6>\r\n                                    @endforeach\r\n                                @endif\r\n                            </div>\r\n                            <div class=\"add-btn\">\r\n                                <div>Add</div>\r\n                                <input type=\"file\" id=\"initial_attachment_c\" name=\"initial_attachment_c[]\"\r\n                                    oninput=\"addMultipleFiles(this,'initial_attachment_c')\" multiple>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n            </div>\r\n            <div class=\"button-block\">\r\n                <button type=\"submit\" class=\"saveButton\" id=\"saveButton\"\r\n                            @if ($data->stage == 8) onclick=\"showAlert(event)\" @endif>Save</button>\r\n\r\n                        <div id=\"alert-message\" style=\"display:none;\">\r\n                            Your stage is Closed - Done You Cannot Edit or Save.\r\n                        </div>\r\n                           \r\n\r\n                        <script>\r\n                            function showAlert(event) {\r\n                                event.preventDefault(); // Prevent form submission\r\n                                var alertMessage = document.getElementById('alert-message').innerText;\r\n                                alert(alertMessage);\r\n                            }\r\n                        \r\n                            document.addEventListener('DOMContentLoaded', function () {\r\n                                var stage = {{ $data->stage }};\r\n                                \r\n                              \r\n                            });\r\n                        </script>\r\n                <button type=\"button\" class=\"backButton\" onclick=\"previousStep()\">Back</button>\r\n                <button type=\"button\" class=\"nextButton\" onclick=\"nextStep()\">Next</button>\r\n\r\n                <button type=\"button\"> <a class=\"text-white\" href=\"{{ url('rcms/qms-dashboard') }}\">Exit\r\n                    </a> </button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <div id=\"CCForm5\" class=\"inner-block cctabcontent\">\r\n        <div class=\"inner-block-content\">\r\n\r\n            <div class=\"row\">\r\n\r\n\r\n\r\n                <div class=\"sub-head\">\r\n                    Activity Log\r\n                </div>\r\n\r\n\r\n                <div class=\"col-lg-4\">\r\n                    <div class=\"group-input\">\r\n                        <label for=\"Initiator Group\">Submit By : </label>\r\n                        <div class=\"static\">{{ $data->submitted_by }}</div>\r\n\r\n                    </div>\r\n                </div>\r\n\r\n                <div class=\"col-lg-4 new-date-data-field\">\r\n                    <div class=\"group-input input-date\">\r\n                        <label for=\"OOC Logged On\">Submit On : </label>\r\n                        <div class=\"Date\">{{ $data->submitted_on }}</div>\r\n\r\n                    </div>\r\n                </div>\r\n                <div class=\"col-lg-4\">\r\n                    <div class=\"group-input\">\r\n                        <label for=\"Comment\">Comment</label>\r\n                        <div class=\"static\">{{ $data->submitted_comment }}</div>\r\n                    </div>\r\n                </div>\r\n\r\n\r\n\r\n\r\n                <div class=\"col-lg-4\">\r\n                    <div class=\"group-input\">\r\n                        <label for=\"Initiator Group\">Complete Review By : </label>\r\n                        <div class=\"static\">{{ $data->complete_review_by }}</div>\r\n\r\n                    </div>\r\n                </div>\r\n\r\n                <div class=\"col-lg-4 new-date-data-field\">\r\n                    <div class=\"group-input input-date\">\r\n                        <label for=\"OOC Logged On\">Complete Review On :</label>\r\n                        <div class=\"date\">{{ $data->complete_review_on }}</div>\r\n                    </div>\r\n                </div>\r\n                <div class=\"col-lg-4\">\r\n                    <div class=\"group-input\">\r\n                        <label for=\"Comment\">Comment</label>\r\n                        <div class=\"static\">{{ $data->complete_review_comment }}</div>\r\n                    </div>\r\n                </div>\r\n\r\n\r\n                <div class=\"col-lg-4\">\r\n                    <div class=\"group-input\">\r\n                        <label for=\"Initiator Group\">Investigation Completed By :</label>\r\n                        <div class=\"static\">{{ $data->investigation_completed_by }}</div>\r\n\r\n                    </div>\r\n                </div>\r\n\r\n                <div class=\"col-lg-4 new-date-data-field\">\r\n                    <div class=\"group-input input-date\">\r\n                        <label for=\"OOC Logged On\">Investigation Completed On : </label>\r\n\r\n                        <div class=\"date\">{{ $data->investigation_completed_on }}</div>\r\n\r\n\r\n\r\n                    </div>\r\n                </div>\r\n                <div class=\"col-lg-4\">\r\n                    <div class=\"group-input\">\r\n                        <label for=\"Comment\">Comment</label>\r\n                        <div class=\"static\">{{ $data->investigation_completed_comment }}</div>\r\n                    </div>\r\n                </div>\r\n\r\n\r\n                <div class=\"col-lg-4\">\r\n                    <div class=\"group-input\">\r\n                        <label for=\"Initiator Group\">Propose Plan By : </label>\r\n                        <div class=\"static\">{{ $data->propose_plan_by }}</div>\r\n\r\n                    </div>\r\n                </div>\r\n\r\n                <div class=\"col-lg-4 new-date-data-field\">\r\n                    <div class=\"group-input input-date\">\r\n                        <label for=\"OOC Logged On\">Propose Plan On : </label>\r\n\r\n                        <div class=\"date\">{{ $data->propose_plan_on }}</div>\r\n\r\n\r\n\r\n                    </div>\r\n                </div>\r\n                <div class=\"col-lg-4\">\r\n                    <div class=\"group-input\">\r\n                        <label for=\"Comment\">Comment</label>\r\n                        <div class=\"static\">{{ $data->propose_plan_comment }}</div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class=\"col-lg-4\">\r\n                    <div class=\"group-input\">\r\n                        <label for=\"Initiator Group\">Approve Plan By : </label>\r\n                        <div class=\"static\">{{ $data->approve_plan_by }}</div>\r\n\r\n                    </div>\r\n                </div>\r\n\r\n                <div class=\"col-lg-4 new-date-data-field\">\r\n                    <div class=\"group-input input-date\">\r\n                        <label for=\"OOC Logged On\">Approve Plan On : </label>\r\n                        <div class=\"date\">{{ $data->approve_plan_on }}</div>\r\n\r\n\r\n\r\n\r\n                    </div>\r\n                </div>\r\n                <div class=\"col-lg-4\">\r\n                    <div class=\"group-input\">\r\n                        <label for=\"Comment\">Comment</label>\r\n                        <div class=\"static\">{{ $data->approve_plan_comment }}</div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class=\"col-lg-4\">\r\n                    <div class=\"group-input\">\r\n                        <label for=\"Initiator Group\">All CAPA Closed By : </label>\r\n                        <div class=\"static\">{{ $data->all_capa_closed_by }}</div>\r\n\r\n                    </div>\r\n                </div>\r\n\r\n                <div class=\"col-lg-4 new-date-data-field\">\r\n                    <div class=\"group-input input-date\">\r\n                        <label for=\"OOC Logged On\">All CAPA Closed On : </label>\r\n                        <div class=\"date\">{{ $data->all_capa_closed_on }}</div>\r\n                    </div>\r\n                </div>\r\n                <div class=\"col-lg-4\">\r\n                    <div class=\"group-input\">\r\n                        <label for=\"Comment\">Comment</label>\r\n                        <div class=\"static\">{{ $data->all_capa_closed_comment }}</div>\r\n                    </div>\r\n                </div>\r\n\r\n\r\n\r\n                <div class=\"col-lg-4\">\r\n                    <div class=\"group-input\">\r\n                        <label for=\"Initiator Group\">Closure Done By : </label>\r\n                        <div class=\"static\">{{ $data->closed_done_by }}</div>\r\n\r\n                    </div>\r\n                </div>\r\n\r\n                <div class=\"col-lg-4 new-date-data-field\">\r\n                    <div class=\"group-input input-date\">\r\n                        <label for=\"OOC Logged On\">Closure Done On : </label>\r\n                        <div class=\"date\">{{ $data->closed_done_on }}</div>\r\n\r\n\r\n\r\n\r\n                    </div>\r\n                </div>\r\n                <div class=\"col-lg-4\">\r\n                    <div class=\"group-input\">\r\n                        <label for=\"Comment\">Comment</label>\r\n                        <div class=\"static\">{{ $data->closed_done_comment }}</div>\r\n                    </div>\r\n                </div>\r\n\r\n\r\n\r\n\r\n            </div>\r\n\r\n\r\n\r\n\r\n            <div class=\"button-block\">\r\n                <button type=\"submit\" class=\"saveButton\">Save</button>\r\n                <button type=\"button\" class=\"backButton\" onclick=\"previousStep()\">Back</button>\r\n\r\n                <button type=\"button\"> <a class=\"text-white\" href=\"{{ url('rcms/qms-dashboard') }}\">Exit\r\n                    </a> </button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    </div>\r\n    </form>\r\n\r\n    </div>\r\n    </div>\r\n\r\n    <style>\r\n        #step-form>div {\r\n            display: none\r\n        }\r\n\r\n        #step-form>div:nth-child(1) {\r\n            display: block;\r\n        }\r\n    </style>\r\n\r\n    <script>\r\n        VirtualSelect.init({\r\n            ele: '#related_records, #hod'\r\n        });\r\n\r\n        function openCity(evt, cityName) {\r\n            var i, cctabcontent, cctablinks;\r\n            cctabcontent = document.getElementsByClassName(\"cctabcontent\");\r\n            for (i = 0; i < cctabcontent.length; i++) {\r\n                cctabcontent[i].style.display = \"none\";\r\n            }\r\n            cctablinks = document.getElementsByClassName(\"cctablinks\");\r\n            for (i = 0; i < cctablinks.length; i++) {\r\n                cctablinks[i].className = cctablinks[i].className.replace(\" active\", \"\");\r\n            }\r\n            document.getElementById(cityName).style.display = \"block\";\r\n            evt.currentTarget.className += \" active\";\r\n\r\n            // Find the index of the clicked tab button\r\n            const index = Array.from(cctablinks).findIndex(button => button === evt.currentTarget);\r\n\r\n            // Update the currentStep to the index of the clicked tab\r\n            currentStep = index;\r\n        }\r\n\r\n        const saveButtons = document.querySelectorAll(\".saveButton\");\r\n        const nextButtons = document.querySelectorAll(\".nextButton\");\r\n        const form = document.getElementById(\"step-form\");\r\n        const stepButtons = document.querySelectorAll(\".cctablinks\");\r\n        const steps = document.querySelectorAll(\".cctabcontent\");\r\n        let currentStep = 0;\r\n\r\n        function nextStep() {\r\n            // Check if there is a next step\r\n            if (currentStep < steps.length - 1) {\r\n                // Hide current step\r\n                steps[currentStep].style.display = \"none\";\r\n\r\n                // Show next step\r\n                steps[currentStep + 1].style.display = \"block\";\r\n\r\n                // Add active class to next button\r\n                stepButtons[currentStep + 1].classList.add(\"active\");\r\n\r\n                // Remove active class from current button\r\n                stepButtons[currentStep].classList.remove(\"active\");\r\n\r\n                // Update current step\r\n                currentStep++;\r\n            }\r\n        }\r\n\r\n        function previousStep() {\r\n            // Check if there is a previous step\r\n            if (currentStep > 0) {\r\n                // Hide current step\r\n                steps[currentStep].style.display = \"none\";\r\n\r\n                // Show previous step\r\n                steps[currentStep - 1].style.display = \"block\";\r\n\r\n                // Add active class to previous button\r\n                stepButtons[currentStep - 1].classList.add(\"active\");\r\n\r\n                // Remove active class from current button\r\n                stepButtons[currentStep].classList.remove(\"active\");\r\n\r\n                // Update current step\r\n                currentStep--;\r\n            }\r\n        }\r\n    </script>\r\n    <script>\r\n        VirtualSelect.init({\r\n            ele: '#reference_record, #notify_to'\r\n        });\r\n\r\n        $('#summernote').summernote({\r\n            toolbar: [\r\n                ['style', ['style']],\r\n                ['font', ['bold', 'underline', 'clear', 'italic']],\r\n                ['color', ['color']],\r\n                ['para', ['ul', 'ol', 'paragraph']],\r\n                ['table', ['table']],\r\n                ['insert', ['link', 'picture', 'video']],\r\n                ['view', ['fullscreen', 'codeview', 'help']]\r\n            ]\r\n        });\r\n\r\n        $('.summernote').summernote({\r\n            toolbar: [\r\n                ['style', ['style']],\r\n                ['font', ['bold', 'underline', 'clear', 'italic']],\r\n                ['color', ['color']],\r\n                ['para', ['ul', 'ol', 'paragraph']],\r\n                ['table', ['table']],\r\n                ['insert', ['link', 'picture', 'video']],\r\n                ['view', ['fullscreen', 'codeview', 'help']]\r\n            ]\r\n        });\r\n\r\n        let referenceCount = 1;\r\n\r\n        function addReference() {\r\n            referenceCount++;\r\n            let newReference = document.createElement('div');\r\n            newReference.classList.add('row', 'reference-data-' + referenceCount);\r\n            newReference.innerHTML = `\r\n            <div class=\"col-lg-6\">\r\n                <input type=\"text\" name=\"reference-text\">\r\n            </div>\r\n            <div class=\"col-lg-6\">\r\n                <input type=\"file\" name=\"references\" class=\"myclassname\">\r\n            </div><div class=\"col-lg-6\">\r\n                <input type=\"file\" name=\"references\" class=\"myclassname\">\r\n            </div>\r\n        `;\r\n            let referenceContainer = document.querySelector('.reference-data');\r\n            referenceContainer.parentNode.insertBefore(newReference, referenceContainer.nextSibling);\r\n        }\r\n    </script>\r\n    <script>\r\n        var maxLength = 255;\r\n        $('#docname').keyup(function() {\r\n            var textlen = maxLength - $(this).val().length;\r\n            $('#rchars').text(textlen);\r\n        });\r\n    </script>\r\n    {{-- ====================script for record number and intir--code ===================== --}}\r\n<script>\r\n    document.addEventListener('DOMContentLoaded', function() {\r\nvar originalRecordNumber = document.getElementById('record').value;\r\nvar initialPlaceholder = '---';\r\n\r\ndocument.getElementById('initiator_group').addEventListener('change', function() {\r\n    var selectedValue = this.value;\r\n    var recordNumberElement = document.getElementById('record');\r\n    var initiatorGroupCodeElement = document.getElementById('initiator_group_code');\r\n\r\n    // Update the initiator group code\r\n    initiatorGroupCodeElement.value = selectedValue;\r\n\r\n    // Update the record number by replacing the initial placeholder with the selected initiator group code\r\n    var newRecordNumber = originalRecordNumber.replace(initialPlaceholder, selectedValue);\r\n    recordNumberElement.value = newRecordNumber;\r\n\r\n    // Update the original record number to keep track of changes\r\n    originalRecordNumber = newRecordNumber;\r\n    initialPlaceholder = selectedValue;\r\n});\r\n});\r\n\r\n</script>\r\n\r\n@endsection\r\n"
        }
    ]
}